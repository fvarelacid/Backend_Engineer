"use strict";(self.webpackChunkott_sas_eu_checkout=self.webpackChunkott_sas_eu_checkout||[]).push([[3161],{71396:(i,e,l)=>{l.d(e,{oF:()=>o,zl:()=>t,Yq:()=>n,ll:()=>r,HV:()=>a,Aj:()=>d,k1:()=>u,lW:()=>s,Uk:()=>v,Qw:()=>c});const o="menu",t="main",n="MENU/GROUP",r="MENU/SUB_MENU",a="MAIN",d="SIGN_IN",u="SOCIAL",s="FOOTER",v={widgets:"widgets"},c="CMS/WIDGET/JSON"},17147:(i,e,l)=>{l.d(e,{xw:()=>o.xw,UU:()=>n,l7:()=>o.l7,$N:()=>o.$N,Hv:()=>a,Bg:()=>o.Bg,ZW:()=>o.ZW});var o=l(49462);const t=(i=[],e=[])=>0===i.length||0===e.length?i:i.reduce(((i,l)=>l.alias&&e.includes(l.alias)?i:l.relationships?[...i,{...l,relationships:t(l.relationships,e)}]:[...i,l]),[]),n=(i,e=[])=>{if(i)return e&&0!==e.length?{...i,relationships:t(i.relationships,e)}:i};var r=l(71396);const a=({retained:i=!1}={})=>({id:r.oF,reducerMap:{menu:o.I6},retained:i})},49462:(i,e,l)=>{l.d(e,{xw:()=>w,l7:()=>I,r7:()=>h,$N:()=>S,I6:()=>N,Bg:()=>U,ZW:()=>b});var o=l(87633),t=l(14890),n=l(20573),r=l(71396);function a({items:i,images:e}){const l=i||e;return((null==l?void 0:l.data)??[]).map(d)}function d({attributes:i={},relationships:e={},...l}={}){const o=(l.type===r.Yq||l.type===r.ll)&&i.title||"";return{...l,...i,ariaLabel:o,relationships:a(e)}}function u(i={}){return[null,d(i.data)]}const s=r.oF,v=r.Uk.widgets,c=Object.values(r.Uk),p=c.reduce(((i,e)=>({...i,[e]:{}})),{}),f=c.join("|");function g(i){const{name:e,slug:l}=i,t=(0,o.MM8)();return async i=>{i((0,o.PHw)(`${s}/${v}/${e}/GET_RESOURCE_REQUEST`)());const[n,a]=await function(i,e){var l;const t="GET_WIDGET",n={slug:i,activeTerritory:e},a=(0,o.FFq)({object:n,schema:{properties:{slug:{type:"string"},activeTerritory:{type:"string"}},required:["slug"]}});if(a.length)return(0,o.sML)({service:t,validationErrors:a});const d=(0,o.iEs)(),{device:u,language:s,platform:v,proposition:c,provider:p,territory:f}=d,g=(0,o.wUd)({device:u,language:s,platform:v,proposition:c,provider:p,territory:f,activeTerritory:e}),{hostname:y,widget:E}=(null==d||null===(l=d.endpoints)||void 0===l?void 0:l[r.oF])??{},m=`${y}${E}?slug=${i}`;return(0,o.WY0)({headers:g,service:t,url:m,timeout:5e3})}(l,t);return i(n?(0,o.PHw)(`${s}/${v}/${e}/GET_RESOURCE_FAILURE`)(n):a?(0,o.PHw)(`${s}/${v}/${e}/GET_RESOURCE_SUCCESS`)(a):(0,o.PHw)(`${s}/${v}/${e}/GET_RESOURCE_FAILURE`)(new Error("No data returned")))}}const{actionTypes:y,actionCreators:E,reducer:m,initialState:O}=(0,o.G6J)({prefix:r.oF,name:"getMenu",service:function({navIdentifier:i,sectionNavigation:e,activeTerritory:l}={}){const t="GET_MENU",n={navIdentifier:i,sectionNavigation:e,activeTerritory:l},a=(0,o.FFq)({object:n,schema:{properties:{navIdentifier:{type:"string"},sectionNavigation:{type:"string"},activeTerritory:{type:"string"}}}});if(a.length)return(0,o.sML)({service:t,validationErrors:a});const{device:d,language:s,platform:v,proposition:c,provider:p,territory:f,endpoints:g}=(0,o.iEs)(),y=(0,o.wUd)({device:d,language:s,platform:v,proposition:c,provider:p,territory:f,activeTerritory:l}),{hostname:E,adapterVersion:m}=(null==g?void 0:g[r.oF])??{};return(0,o.WY0)({url:`${E}/${m}/query/menu`,headers:y,params:{...i&&{nav_identifier:i},...e&&{section_navigation:e}},service:t,handleResponse:u,timeout:5e3})}});function T(i,e=""){return i.reduce(((i=[],l)=>{if(l.type===r.Qw)return{...l,name:e};if(null!=l&&l.relationships&&l.relationships.length>0){const e=T(l.relationships,l.alias);if(e)return[...i,e]}return i.length>0?i:void 0}),[])}const h=()=>{const{navIdentifier:i,menu:e}=(0,o.iEs)(),l=i??(null==e?void 0:e.navIdentifier),t=null==e?void 0:e.sectionNavigation,n=(0,o.MM8)();return async i=>{var e;const o=await i(E.getMenu({navIdentifier:l,sectionNavigation:t,activeTerritory:n}));if(null!=o&&null!==(e=o.payload)&&void 0!==e&&e.relationships){const[e]=T(o.payload.relationships)||[];if(e)for(const l of e)await i(g({name:l.name,slug:l.slug}))}return o}};function R(i){var e,l,o;return(null==i||null===(e=i[r.oF])||void 0===e||null===(l=e[r.zl])||void 0===l||null===(o=l.data)||void 0===o?void 0:o.relationships)??[]}const _=i=>(0,n.P1)(R,(e=>e.find((e=>e.alias===i))??{})),U=_(r.Aj),S=_(r.HV),I=(0,n.P1)(_(r.lW),(i=>{const e=(null==i?void 0:i.relationships)??[];return{alias:null==i?void 0:i.alias,ariaLabel:null==i?void 0:i.ariaLabel,relationships:e.map((i=>({id:(0,o.mA0)((null==i?void 0:i.alias)??""),title:(null==i?void 0:i.title)??"",alias:(null==i?void 0:i.alias)??"",ariaLabel:(null==i?void 0:i.ariaLabel)??"",displayOption:(null==i?void 0:i.displayOption)??"",href:(null==i?void 0:i.uri)??"",isExpandable:(null==i?void 0:i.childNodeTypes.includes(r.Qw))??!1})))}})),b=(0,n.P1)(_(r.k1),(i=>{const e=(null==i?void 0:i.relationships)??[];return{alias:null==i?void 0:i.alias,ariaLabel:null==i?void 0:i.ariaLabel,relationships:e.map((i=>{var e,l;return{id:(0,o.mA0)((null==i?void 0:i.alias)??""),title:(null==i?void 0:i.title)??"",alias:(null==i?void 0:i.alias)??"",ariaLabel:(null==i?void 0:i.ariaLabel)??"",displayOption:(null==i?void 0:i.displayOption)??"",url:(null==i||null===(e=i.relationships)||void 0===e||null===(l=e[0])||void 0===l?void 0:l.url)??"",href:(null==i?void 0:i.uri)??"",isExpandable:(null==i?void 0:i.childNodeTypes.includes(r.Qw))??!1}}))}})),w=i=>{const e=function(i){var e,l;return null==i||null===(e=i[r.oF])||void 0===e||null===(l=e.widget)||void 0===l?void 0:l[v]}(i),l={};for(const[i,t]of Object.entries(e)){var o;l[i]=null==t||null===(o=t.data)||void 0===o?void 0:o.content}return l},N=(0,t.combineReducers)({[r.zl]:m,widget:(i=p,e={})=>{const l=new RegExp(`^${s}/(${f})/(.*)/GET_RESOURCE_(REQUEST|SUCCESS|FAILURE)$`);if(l.test(e.type)){const[o,t,n]=l.exec(e.type).slice(1);return{...i,[o]:{...i[o],[t]:{isFetching:"REQUEST"===n,data:"SUCCESS"===n?e.payload:null,error:"FAILURE"===n?e.payload:null}}}}return i}})},56301:(i,e,l)=>{l.d(e,{F:()=>n});var o=l(87633),t=l(49462);const n=(0,o.iis)(t.r7)},53664:(i,e,l)=>{l.d(e,{LB:()=>o,hc:()=>t,n7:()=>n});const o={SHOW_OVERLAY:"overlays/SHOW_OVERLAY",REMOVE_OVERLAYS:"overlays/REMOVE_OVERLAYS"};function t(i){return{type:o.SHOW_OVERLAY,payload:i}}function n(){return{type:o.REMOVE_OVERLAYS}}},43989:(i,e,l)=>{l.d(e,{KD:()=>r,u_:()=>a,n7:()=>o.n7});var o=l(53664);const t={activeOverlay:""},n=(i=t,{type:e,payload:l})=>{switch(e){case o.LB.SHOW_OVERLAY:return{...i,activeOverlay:l||""};case o.LB.REMOVE_OVERLAYS:return{...i,activeOverlay:""};default:return i}},r=({retained:i=!1}={})=>({id:"overlay",reducerMap:{overlays:n},retained:i}),a=(0,l(20573).P1)((i=>null==i?void 0:i.overlays),(i=>({overlays:i})))},14424:(i,e,l)=>{l.d(e,{oF:()=>o,Sg:()=>t,rq:()=>n});const o="profile",t={UNAUTHORIZED:"UNAUTHORIZED"},n={400:{2003:"IDENTITY_MALFORMED_AUTHORIZATION",COM_00002:"INVALID_OTT_USER_TOKEN",COM_00003:"EXPIRED_OTT_USER_TOKEN",OVP_00006:"INVALID_OTT_USER_TOKEN",OVP_00007:"EXPIRED_OTT_USER_TOKEN"},403:{1301:"PROFILE_NOT_FOUND"}}},41265:(i,e,l)=>{l.d(e,{cY:()=>t.cY,et:()=>t.et,Gd:()=>a,Qp:()=>t.Qp});var o=l(14890),t=l(70572);const n=(0,o.combineReducers)({userProfile:t.I6});var r=l(14424);const a=({retained:i=!1}={})=>({id:r.oF,reducerMap:{profile:n},retained:i})},70572:(i,e,l)=>{l.d(e,{cY:()=>_,et:()=>U,I6:()=>T,S_:()=>S,Qp:()=>R});var o=l(16423),t=l(87633),n=l(20573),r=l(14424);const a="GET_USER_PROFILE";var d=l(67813);function u({response:i={},error:e}){if(e)return!1;const{isRestricted:l,trackingId:o,elevatedSecurity:t,mParticlePartyId:n}=i;l||(0,d.a)({mparticle_id:n,tracking_id:o,elevated_security:t})}var s=l(28798),v=l(31769);function c(i){var e,l,o,n,r,a,d,u,c,p,f,g,y,E,m,O,T,h,R,_,U,S,I,b,w,N,k,F,M,L,P,$,A,C,D,V,Y,H,W,G,j,B,q,x,Z,Q,K,z,J,X,ii,ei,li,oi,ti,ni,ri,ai,di,ui,si,vi,ci,pi,fi,gi,yi,Ei,mi,Oi,Ti,hi,Ri,_i,Ui,Si,Ii,bi,wi,Ni,ki,Fi,Mi,Li,Pi,$i,Ai,Ci,Di,Vi,Yi,Hi,Wi,Gi,ji,Bi,qi,xi,Zi,Qi,Ki,zi;const{provider:Ji,proposition:Xi,territory:ie,serviceBlock:ee,serviceBlockRedirects:le}=(0,t.iEs)(),{fullysignedup:oe,termsandconditionsaccepted:te,servicename:ne}=((i,e,{proposition:l,territory:o})=>{var t,n,r;let a=e;return e||(a=`${l}-${o}`.toLowerCase()),(null==i||null===(t=i.data)||void 0===t||null===(n=t.profile)||void 0===n||null===(r=n.services)||void 0===r?void 0:r[a])??{}})(i,ee,{proposition:Xi,territory:ie}),re=null==i||null===(e=i.data)||void 0===e||null===(l=e.profile)||void 0===l||null===(o=l.details)||void 0===o?void 0:o.title,ae=null==i||null===(n=i.data)||void 0===n||null===(r=n.profile)||void 0===r||null===(a=r.details)||void 0===a?void 0:a.firstname,de=null==i||null===(d=i.data)||void 0===d||null===(u=d.profile)||void 0===u||null===(c=u.details)||void 0===c?void 0:c.lastname,ue=null==i||null===(p=i.data)||void 0===p||null===(f=p.profile)||void 0===f||null===(g=f.details)||void 0===g||null===(y=g.contact)||void 0===y?void 0:y.email,se=null==i||null===(E=i.data)||void 0===E||null===(m=E.profile)||void 0===m||null===(O=m.details)||void 0===O?void 0:O.username,ve=null==i||null===(T=i.data)||void 0===T||null===(h=T.profile)||void 0===h||null===(R=h.id)||void 0===R?void 0:R.profileid,ce=null==i||null===(_=i.data)||void 0===_||null===(U=_.profile)||void 0===U||null===(S=U.id)||void 0===S?void 0:S.trackingid,pe=null==i||null===(I=i.data)||void 0===I||null===(b=I.profile)||void 0===b||null===(w=b.id)||void 0===w||null===(N=w.obfuscatedids)||void 0===N||null===(k=N.barclaycard)||void 0===k?void 0:k.profileid,fe=null==i||null===(F=i.data)||void 0===F||null===(M=F.profile)||void 0===M||null===(L=M.details)||void 0===L||null===(P=L.contact)||void 0===P||null===($=P.mobile)||void 0===$?void 0:$.number,ge=(null==i||null===(A=i.data)||void 0===A||null===(C=A.profile)||void 0===C||null===(D=C.securityoptions)||void 0===D||null===(V=D.emailstepup)||void 0===V?void 0:V.enabled)??!1,ye=null==i||null===(Y=i.data)||void 0===Y||null===(H=Y.profile)||void 0===H||null===(W=H.id)||void 0===W||null===(G=W.aliases)||void 0===G||null===(j=G.email)||void 0===j?void 0:j.verified,Ee=null==i||null===(B=i.data)||void 0===B||null===(q=B.profile)||void 0===q||null===(x=q.id)||void 0===x||null===(Z=x.aliases)||void 0===Z||null===(Q=Z.email)||void 0===Q?void 0:Q.registrationdate,me=((i="")=>{if(!i)return!1;const e=new Date,l=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),[o,t,n]=i.split("-");return l===Date.UTC(n,parseInt(t,10)-1,o)})(Ee),Oe=null==i||null===(K=i.data)||void 0===K||null===(z=K.profile)||void 0===z||null===(J=z.verificationdata)||void 0===J?void 0:J.graceperioddate,Te=null==i||null===(X=i.data)||void 0===X||null===(ii=X.profile)||void 0===ii||null===(ei=ii.verificationdata)||void 0===ei?void 0:ei.graceperiodduration,he=(null==i||null===(li=i.data)||void 0===li||null===(oi=li.profile)||void 0===oi||null===(ti=oi.verificationdata)||void 0===ti?void 0:ti.graceperiodexpired)??!1,Re=null==i||null===(ni=i.data)||void 0===ni||null===(ri=ni.profile)||void 0===ri?void 0:ri.globalbookmarkingoptout,_e=(null==i||null===(ai=i.data)||void 0===ai||null===(di=ai.profile)||void 0===di||null===(ui=di.communicationsettings)||void 0===ui?void 0:ui.emailproductupdates)??!1,Ue=(null==i||null===(si=i.data)||void 0===si||null===(vi=si.profile)||void 0===vi||null===(ci=vi.communicationsettings)||void 0===ci?void 0:ci.emailcontent)??!1,Se=(null==i||null===(pi=i.data)||void 0===pi||null===(fi=pi.profile)||void 0===fi||null===(gi=fi.communicationsettings)||void 0===gi?void 0:gi.emailoffers)??!1,Ie=(null==i||null===(yi=i.data)||void 0===yi||null===(Ei=yi.profile)||void 0===Ei||null===(mi=Ei.communicationsettings)||void 0===mi?void 0:mi.smsmarketing)??!1,be=(null==i||null===(Oi=i.data)||void 0===Oi||null===(Ti=Oi.profile)||void 0===Ti?void 0:Ti.analyticslight)??!1,we=(null==i||null===(hi=i.data)||void 0===hi||null===(Ri=hi.profile)||void 0===Ri?void 0:Ri.kidsautoplayoptout)??!1,Ne=(null==i||null===(_i=i.data)||void 0===_i||null===(Ui=_i.profile)||void 0===Ui?void 0:Ui.personalisedrecsoptout)??!1,ke=null==i||null===(Si=i.data)||void 0===Si||null===(Ii=Si.profile)||void 0===Ii||null===(bi=Ii.optoutpreferences)||void 0===bi?void 0:bi.emailmarketing,Fe=null==i||null===(wi=i.data)||void 0===wi||null===(Ni=wi.profile)||void 0===Ni||null===(ki=Ni.optoutpreferences)||void 0===ki?void 0:ki.pushnotifications,Me=null==i||null===(Fi=i.data)||void 0===Fi||null===(Mi=Fi.profile)||void 0===Mi||null===(Li=Mi.optoutpreferences)||void 0===Li?void 0:Li.profiling,Le=null!=i&&null!==(Pi=i.data)&&void 0!==Pi&&null!==($i=Pi.profile)&&void 0!==$i&&$i.optoutpreferences?(null==i||null===(Ai=i.data)||void 0===Ai||null===(Ci=Ai.profile)||void 0===Ci||null===(Di=Ci.optoutpreferences)||void 0===Di||null===(Vi=Di.nfl)||void 0===Vi?void 0:Vi.consent)??!1:void 0,Pe=null==i||null===(Yi=i.data)||void 0===Yi||null===(Hi=Yi.profile)||void 0===Hi||null===(Wi=Hi.id)||void 0===Wi||null===(Gi=Wi.obfuscatedids)||void 0===Gi||null===(ji=Gi.braze)||void 0===ji?void 0:ji.profileid,$e=null==i||null===(Bi=i.data)||void 0===Bi||null===(qi=Bi.profile)||void 0===qi||null===(xi=qi.id)||void 0===xi||null===(Zi=xi.obfuscatedids)||void 0===Zi||null===(Qi=Zi.mparticle)||void 0===Qi?void 0:Qi.partyid,Ae=null==i||null===(Ki=i.data)||void 0===Ki||null===(zi=Ki.profile)||void 0===zi?void 0:zi.migrated;if((0,s.YA)("profileId",ve),(0,t.b45)(`${Ji}:${Xi}:${ie}`),null!=le&&le.enabled&&!ne){var Ce,De;let e,l;Object.keys((null==i||null===(Ce=i.data)||void 0===Ce||null===(De=Ce.profile)||void 0===De?void 0:De.services)??[]).every((i=>{var o;return e=i,l=null==le||null===(o=le.redirects)||void 0===o?void 0:o[i],!l})),l&&((0,v.CN)(),(0,s.uT)(`Territory Service Block Redirect from ${ee} to ${e}`),window.location.href=l)}return[null,{analyticsLight:be,barclaycardProfileId:pe,brazeProfileId:Pe,elevatedSecurity:ge,email:ue,emailContent:Ue,emailOffers:Se,emailProductUpdates:_e,emailVerified:ye,firstName:ae,fullySignedUp:oe,globalBookmarkingOptOut:Re,gracePeriodDate:Oe,gracePeriodDuration:Te,gracePeriodExpired:he,isRegisteredToday:me,isRestricted:!ve,isUserMigrated:Ae,kidsAutoPlayOptOut:we,lastName:de,mobile:fe,mParticlePartyId:$e,personalisedRecsOptOut:Ne,profileId:ve,registrationDate:Ee,smsMarketing:Ie,tcsAccepted:te,title:re,trackingId:ce,username:se,emailMarketingOptOut:ke,pushNotificationsOptOut:Fe,profilingOptOut:Me,nflConsent:Le}]}function p(i){let e=i.key;return(0,o.Z)(r.rq,`${i.status}.${i.errorCode}`,!1)&&(e=r.Sg.UNAUTHORIZED),[{...i,key:e}]}function f({service:i,key:e}={}){return i!==a||e!==t.Sgr.FORBIDDEN&&e!==t.Sgr.UNAUTHORIZED&&e!==t.Sgr.CLIENT}const g="application/vnd.aggregator.v3+json",y="UPDATE_NFL_PREFERENCES",E="application/vnd.bridge.v1+json",{actionTypes:m,actionCreators:O,reducer:T,initialState:h}=(0,t.gi9)({prefix:r.oF,services:{getUserProfile:function(i={}){const e=(0,t.FFq)({object:i,schema:{properties:{messoToken:{type:"string"},activeTerritory:{type:"string"},elevatedSecurity:{type:"boolean"},verificationData:{type:"boolean"},withOptOuts:{type:"boolean"}}}});if(e.length)return(0,t.sML)({service:a,validationErrors:e});const l=(0,t.iEs)(),{device:o,platform:n,proposition:r,provider:d,territory:s}=l,{messoToken:v,activeTerritory:y}=i,E=(0,t.wUd)({device:o,platform:n,proposition:r,provider:d,territory:s,activeTerritory:y,messoToken:v?`Session ${v}`:void 0,accept:g,contentType:g}),m=function({elevatedSecurity:i=!1,verificationData:e=!1,withOptOuts:l=!1}={}){const o=[i&&"secopts",e&&"verificationdata",l&&"optouts"].filter(Boolean).join(",");return{...o?{scope:o}:{}}}(i),{hostname:O,userProfile:T}=l.endpoints.oogway,h=O+T;return(0,t.WY0)({headers:E,service:a,timeout:5e3,handleResponse:c,handleError:p,url:h,params:m,withCredentials:!0,handleAnalytics:u,shouldCaptureMessage:f})},updateNflPreferences:function(i={consentFlag:!1}){const e=(0,t.FFq)({object:i,schema:{properties:{consentFlag:{type:"boolean"},activeTerritory:{type:"string"}}}});if(e.length)return(0,t.sML)({service:y,validationErrors:e});const l=(0,t.iEs)(),{proposition:o,provider:n,territory:r}=l,{consentFlag:a,activeTerritory:d}=i,u=(0,t.wUd)({proposition:o,provider:n,territory:r,activeTerritory:d,accept:E,contentType:E}),s={nfl:{consent:a}},{hostname:v,nflPreferences:c}=l.endpoints.oogway,p=v+c;return(0,t.WY0)({headers:u,service:y,method:"put",data:s,url:p,withCredentials:!0})}}});function R(i){return(0,o.Z)(i,"profile.userProfile")}const _=(0,n.P1)(R,(i=>{const{isFetching:e,data:l,error:o}=i;return{error:o,isFetching:e,...l}}));function U({elevatedSecurity:i=!1,verificationData:e=!1,withOptOuts:l=!1}={}){const o=(0,t.h2q)(),n=(0,t.MM8)();return t=>t(O.getUserProfile({messoToken:o,elevatedSecurity:i,verificationData:e,withOptOuts:l,activeTerritory:n}))}function S(i){const e=(0,t.MM8)();return l=>l(O.updateNflPreferences({consentFlag:i,activeTerritory:e}))}},25350:(i,e,l)=>{l.d(e,{o:()=>o});const o="umvToken"},50125:(i,e,l)=>{l.d(e,{fw:()=>n});var o=l(17081),t=l(25350);const n=({retained:i=!1}={})=>({id:t.o,reducerMap:{umvToken:o.I6},retained:i})},17081:(i,e,l)=>{l.d(e,{I6:()=>d,t3:()=>s});var o=l(16423),t=l(87633),n=l(25350);const{actionTypes:r,actionCreators:a,reducer:d,initialState:u}=(0,t.gi9)({prefix:n.o,services:{getUmvToken:async(...i)=>{const e=await(0,t.buJ)(...i),l=(0,o.Z)(e,["1","userToken"]);return(0,t.$KD)(l)&&(0,t.sb0)(l),e}}});function s(i={}){return e=>{const{personaId:l}=i;return e(a.getUmvToken({messoToken:(0,t.h2q)(),personaId:l,activeTerritory:(0,t.MM8)()}))}}}}]);
//# sourceMappingURL=3161.b529aa0ff72083c92595.min.js.map