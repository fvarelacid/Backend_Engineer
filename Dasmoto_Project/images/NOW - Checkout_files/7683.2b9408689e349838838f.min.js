"use strict";(self.webpackChunkott_sas_eu_checkout=self.webpackChunkott_sas_eu_checkout||[]).push([[7683],{53286:(e,n,o)=>{o.d(n,{eI:()=>E});var t=o(22307),r=o(77243),i=o(9099),l=o(25874),a=o(69266),s=o(87633),u=o(88603),d=o(72198),c=o(93581),v=o(44586),p=o(62457);const g=e=>1e3*Math.pow(2,e),f=({retries:e=4}={})=>{const n=Math.min(4,Math.ceil(e));return new p.W({delay:g,attempts:{max:n}})},m="GRAPHQL",h="UNKNOWN",y=e=>{var n,o,t;const r=e.getContext();return null!==(t=null===(o=null===(n=null==r?void 0:r.response)||void 0===n?void 0:n.headers)||void 0===o?void 0:o.get("x-skyint-requestid"))&&void 0!==t?t:h},k="UNKNOWN_QUERY";var b=o(63200);function S(e){return e?`UNKNOWN_${e}`:h}function E({retryOptions:e={},links:n=[],fetch:o,ssrMode:p,httpLink:g,cache:h}={}){var E;const{endpoints:C}=(0,s.iEs)(),w=[new c.i(((e,n)=>{const o=(0,v.Z)(),{platform:t,provider:r,proposition:i,territory:l,language:a,device:u,appName:d,authScheme:c}=(0,s.iEs)();return e.setContext({headers:{...(0,s.wUd)({platform:t,provider:r,proposition:i,territory:l,device:u,language:a,requestId:o,messoToken:(0,s.h2q)(),ssoToken:(0,s.KjM)(),application:d,umvToken:(0,s.t3n)(),tokenType:c,activeTerritory:(0,s.MM8)()})}}),n(e)})),(N=s.tuZ,new c.i(((e,n)=>{if(!N)return n(e);const o=((e,n)=>{var o;const t=e.startTransaction(null!==(o=n.operationName)&&void 0!==o?o:k,"graphql"),r=null==t?void 0:t.startSpan("span start","span");return{transaction:t,transactionSpan:r}})(N,e);return n(e).map((n=>{var t,r,i;const l=e.getContext(),a=null===(t=null==l?void 0:l.response)||void 0===t?void 0:t.status,s=null!==(r=null==e?void 0:e.operationName)&&void 0!==r?r:k;return null===(i=null==n?void 0:n.errors)||void 0===i||i.forEach((({extensions:e})=>{var n,t;const r=null===(n=null==o?void 0:o.transaction)||void 0===n?void 0:n.startSpan(`${null!==(t=null==e?void 0:e.service)&&void 0!==t?t:"unknown-error"}`,"span-error");null==r||r.addLabels({httpStatus:null==e?void 0:e.status,errorCode:null==e?void 0:e.errorCode,errorKey:null==e?void 0:e.code,operationName:s}),null==r||r.end()})),setTimeout((()=>{((e,n)=>{var o,t,r;e&&(null===(o=null==e?void 0:e.transaction)||void 0===o||o.addLabels(n),null===(t=null==e?void 0:e.transactionSpan)||void 0===t||t.end(),null===(r=null==e?void 0:e.transaction)||void 0===r||r.end())})(o,{requestId:y(e),httpStatus:a,operationName:s})}),0),n}))}))),(0,b.q)((e=>{const{message:n,requestId:o,statusCode:t,errorCode:r,operationName:i,graphqlErrors:l}=(e=>{var n;const{graphQLErrors:o=[],networkError:t,operation:r}=e,i=function({networkError:e}){var n,o;return e?null!==(o=null===(n=e)||void 0===n?void 0:n.statusCode)&&void 0!==o?o:S("STATUS"):200}(e),l=(0,s.RmV)(i)||(null==t?void 0:t.name)||s.Sgr.OTHER,a=null!==(n=null==r?void 0:r.operationName)&&void 0!==n?n:S("OPERATION_NAME");return{message:`GRAPHQL-${a}-${l}`,operationName:a,statusCode:i,errorCode:l,graphqlErrors:o.map((({message:e,extensions:n})=>({message:e,code:null==n?void 0:n.code}))),requestId:y(r)}})(e);(0,s.uTA)(n,{tags:{type:"graphql",service:m},extra:{"X-SkyInt-RequestId":o,status:t,errorCode:r,graphqlErrors:l},fingerprint:[m,i,r]})})),new c.i(((e,n)=>n(e).map((e=>{var n,o,t;const r=null===(n=null==e?void 0:e.extensions)||void 0===n?void 0:n.dataLayer,i=null!==(t=null===(o=null==e?void 0:e.extensions)||void 0===o?void 0:o.events)&&void 0!==t?t:[];return r&&(0,s.y_H)(r),i.length&&i.forEach((([e,n])=>(0,s.qey)(e,n))),e})))),...n,f(e)];var N;return!1!==(null===(E=null==C?void 0:C.graphql)||void 0===E?void 0:E.persistedQueries)&&w.push((0,l.Nq)({sha256:a.JQ,useGETForHashedQueries:!0})),w.push(null!=g?g:(e=>{var n;const{endpoints:o}=(0,s.iEs)();if(!(null===(n=null==o?void 0:o.graphql)||void 0===n?void 0:n.service))throw new Error("No graphql service endpoint in config");return new d.u({uri:o.graphql.service,credentials:"include",...e})})({fetch:o})),new t.f({ssrMode:p,link:(0,r.D)(w),cache:null!=h?h:new i.h({possibleTypes:u.DE.possibleTypes})})}o(20054)},46298:(e,n,o)=>{o.d(n,{J3:()=>d,Kz:()=>v,Fl:()=>p,Nq:()=>c});var t=o(69898),r=o.n(t),i=o(87633),l=o(72464);let a=!1;function s(){return a}const u=e=>{const n=(null==e?void 0:e.extras)||{},o=(()=>{let e;return r().getUser().getUserId((n=>{e=n})),e})(),t=null==n?void 0:n.campaignId,i=null==n?void 0:n.campaignName,l=(null==n?void 0:n.templateType)||(e=>e instanceof r().SlideUpMessage?"SlideUpMessage":e instanceof r().ModalMessage?"ModalMessage":e instanceof r().FullScreenMessage?"FullScreenMessage":e instanceof r().HtmlMessage?"HtmlMessage":void 0)(e);return{brazeUserId:o,campaignId:t,campaignName:i,templateType:l}};function d(e={},n,o){const t=(0,i.iEs)(),{ipn:s={}}=t,{apiKey:d,sdkEndpoint:c,enableHtmlInAppMessages:v}=s;if(d&&c){const t=r().initialize(d,{baseUrl:c,enableHtmlInAppMessages:v,...o});t&&(r().subscribeToInAppMessage((n=>{n instanceof r().HtmlMessage?(r().display.showInAppMessage(n),function(e,{onError:n,trackClick:o,addToBasket:t,customClickHandlers:i}={}){try{const n=(null==e?void 0:e.extras)||{},l=null==i?void 0:i.find((({type:e})=>e===n.customClickHandler)),s=document.querySelector("iframe.ab-html-message").contentDocument;let d=!1;const c=u(e);if(s){let i,u=0;do{if(i=n[`cta-${u}`],i){const v=s.querySelector(i);if(v){var a;const i=n[`cta-${u}-track-click`],s=n[`cta-${u}-add-product`],p=n[`cta-${u}-add-voucher`],g=n[`cta-${u}-redirect`],f=null==l||null===(a=l.buttonHandlers)||void 0===a?void 0:a[u],m=u;v.onclick=()=>{if(d=!0,i&&"function"==typeof o&&o(i,c),s&&"function"==typeof t){const[e,n,o]=s.split(":");t({type:"product",staticId:e,duration:n,category:o})}p&&"function"==typeof t&&t({type:"voucher",code:p}),"function"==typeof f&&f(),r().logInAppMessageHtmlClick(e,v.id||`${m}`),g&&(window.location.href=g),e.closeMessage()}}}u+=1}while(i)}e.subscribeToDismissedEvent((()=>{d||("function"==typeof o&&o("dismiss",c),"function"==typeof(null==l?void 0:l.onClose)&&l.onClose(n))})),"function"==typeof(null==l?void 0:l.onShow)&&l.onShow(n)}catch(o){var s;n?n(o):(0,l.u)(`IPN: error in attaching click handlers for ${(null==e||null===(s=e.extras)||void 0===s?void 0:s.customClickHandler)??"UNKNOWN"}`,{level:"error"})}}(n,e)):n instanceof r().InAppMessage?(r().display.showInAppMessage(n),function(e,{onError:n,trackClick:o,addToBasket:t,customClickHandlers:r}={}){try{const n=(null==e?void 0:e.extras)||{},i=null==r?void 0:r.find((({type:e})=>e===n.customClickHandler)),l=u(e);e.buttons.forEach(((r,a)=>{var s;const u=n[`cta-${a}-track-click`],d=n[`cta-${a}-add-product`],c=n[`cta-${a}-add-voucher`],v=n[`cta-${a}-redirect`],p=null==i||null===(s=i.buttonHandlers)||void 0===s?void 0:s[a];e.buttons[a].subscribeToClickedEvent((()=>{if(u&&"function"==typeof o&&o(u,l),d&&"function"==typeof t){const[e,n,o]=d.split(":");t({type:"product",staticId:e,duration:n,category:o})}c&&"function"==typeof t&&t({type:"voucher",code:c}),"function"==typeof p&&p(),v&&(window.location.href=v)}))})),e.buttons.length||e.subscribeToClickedEvent((()=>{"function"==typeof o&&o((null==n?void 0:n.messageClickTrackingLabel)||"message_click",l)})),e.subscribeToDismissedEvent((()=>{"function"==typeof o&&o("dismiss",l),"function"==typeof(null==i?void 0:i.onClose)&&i.onClose(n)})),"function"==typeof(null==i?void 0:i.onShow)&&i.onShow(n)}catch(o){var i;n?n(o):(0,l.u)(`IPN: error in attaching click handlers for ${(null==e||null===(i=e.extras)||void 0===i?void 0:i.customClickHandler)??"UNKNOWN"}`,{level:"error"})}}(n,e)):r().display.showInAppMessage(n)})),n&&r().changeUser(n),r().openSession(),a=t)}}function c(e){e&&s()&&r().changeUser(e)}function v(e,n={}){return!(!e||!s())&&r().logCustomEvent(e,n)}function p(e={}){if(!s())return!1;const{productId:n,price:o,currency:t="GBP",quantity:i=1}=e;return!(!n||!o)&&r().logPurchase(n,o,t,i)}},20064:(e,n,o)=>{o.d(n,{cq:()=>s,Gn:()=>f,mm:()=>m,PU:()=>c,I6:()=>u});var t=o(20573),r=o(87633);const i=e=>e.sort(((e,n)=>e.rank-n.rank));function l(e){var n,o,t,r;const l=null!==(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.language)&&void 0!==o?o:[],a=null!==(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.subtitleLanguage)&&void 0!==r?r:[];return[null,{audio:i(l),subtitle:i(a)}]}const{actionTypes:a,actionCreators:s,reducer:u,initialState:d}=(0,r.G6J)({prefix:"languages",name:"getAudioSubtitle",service:function(){const{device:e,platform:n,proposition:o,provider:t,territory:i,endpoints:a}=(0,r.iEs)(),s=(0,r.wUd)({device:e,platform:n,proposition:o,provider:t,territory:i}),{hostname:u,audioSubtitle:d}=a.atom,c=u+d;return(0,r.WY0)({headers:s,service:"GET_AUDIO_SUBTITLE",handleResponse:l,url:c,timeout:5e3})}}),{getAudioSubtitle:c}=s,v=e=>{var n;return null===(n=null==e?void 0:e.languages)||void 0===n?void 0:n.audioSubtitles},p=(0,t.P1)(v,(e=>{var n,o;return null!==(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.audio)&&void 0!==o?o:[]})),g=(0,t.P1)(v,(e=>{var n,o;return null!==(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.subtitle)&&void 0!==o?o:[]})),f=(0,t.P1)(p,(e=>{var n,o;const t=e.find((e=>Boolean(e.defaultAudioLanguage)));return null!==(o=null===(n=null==t?void 0:t.code)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:null})),m=(0,t.P1)(g,(e=>{var n,o;const t=e.find((e=>Boolean(e.defaultSubtitleLanguage)));return null!==(o=null===(n=null==t?void 0:t.code)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:null}))},45542:(e,n,o)=>{o.d(n,{Gn:()=>r.Gn,mm:()=>r.mm,lw:()=>s,jh:()=>d,Mj:()=>u});var t=o(27031),r=o(20064),i=o(20573),l=o(14890),a=o(87633);const s=(0,i.P1)(t.b1,(e=>{return e||(null!==(o=null===(n=(0,a.iEs)())||void 0===n?void 0:n.language)&&void 0!==o?o:"en");var n,o})),u=(0,l.combineReducers)({supportedLanguages:t.I6,audioSubtitles:r.I6}),d=({retained:e=!1}={})=>({id:"ott-sas-languages",reducerMap:{languages:u},retained:e}),{getSupportedLanguages:c}=t.cq,{getAudioSubtitle:v}=r.cq},11452:(e,n,o)=>{o.d(n,{N:()=>i,L:()=>a});var t=o(87633),r=o(20064);const i=(0,t.iis)(r.PU);var l=o(27031);const a=(0,t.iis)(l.lc)},27031:(e,n,o)=>{o.d(n,{cq:()=>a,b1:()=>c,lc:()=>d,I6:()=>s});var t=o(20573),r=o(87633);function i(e){var n;return[null,(o=null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],o.sort(((e,n)=>e.rank-n.rank)))];var o}const{actionTypes:l,actionCreators:a,reducer:s,initialState:u}=(0,r.G6J)({prefix:"languages",name:"getSupportedLanguages",service:function(){const{device:e,platform:n,proposition:o,provider:t,territory:l,endpoints:a}=(0,r.iEs)(),s=(0,r.wUd)({device:e,platform:n,proposition:o,provider:t,territory:l}),{hostname:u,supportedLanguages:d}=a.atom,c=u+d;return(0,r.WY0)({headers:s,service:"GET_SUPPORTED_LANGUAGES",handleResponse:i,url:c,timeout:5e3})}}),{getSupportedLanguages:d}=a,c=(0,t.P1)((e=>{var n,o,t;return null!==(t=null===(o=null===(n=null==e?void 0:e.languages)||void 0===n?void 0:n.supportedLanguages)||void 0===o?void 0:o.data)&&void 0!==t?t:[]}),(e=>{var n,o;const t=e.find((e=>Boolean(e.defaultLanguage)));return null!==(o=null===(n=null==t?void 0:t.code)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:null}))}}]);
//# sourceMappingURL=7683.2b9408689e349838838f.min.js.map