"use strict";(self.webpackChunkott_sas_eu_checkout=self.webpackChunkott_sas_eu_checkout||[]).push([[6854],{73187:(e,t,r)=>{r.d(t,{o:()=>n});const n="cmp"},83273:(e,t,r)=>{r.d(t,{$J:()=>a,zg:()=>i,To:()=>o.To});var n=r(73187),o=r(97415);const i=({retained:e=!1}={})=>({id:n.o,reducerMap:{cmp:o.IU},retained:e}),a={TEST:{name:"TEST",id:"5e459f777f06e25586198a74"},OPTIMIZELY:{name:"OPTIMIZELY",id:"5ec515cab8e05c6bd60edc5f",essential:["gb","at"]},QUBIT:{name:"QUBIT",id:"5ee0a050877afa59e3bafc50"},ADOBE_LAUNCH:{name:"ADOBE_LAUNCH",id:"5ed7aacce94c6e0529a5e0c9",essential:["at","de"]},CONTENT_SQUARE:{name:"CONTENT_SQUARE",id:"5ed79ad0af6fbe05caad4cbc"},ADOBE_ANALYTICS:{name:"ADOBE_ANALYTICS",id:"5ed7a9a9e0e22001da9d52ad"},ADOBE_AUDIENCE_MANAGER:{name:"ADOBE_AUDIENCE_MANAGER",id:"5ed7a9bb4ae82701a2e897a3"},FACEBOOK:{name:"FACEBOOK",id:"5e7e1298b8e05c54a85c52d2"},WHATFIX:{name:"WHATFIX",id:"5ef21f31d8a59c15644c3c0d"},GUURU:{name:"GUURU",id:"5f05982fb8c0de02bf034e92",essential:["gb","at"]},BRAZE:{name:"BRAZE",id:"5ed8c49c4b8ce4571c7ad801"},DYNAMIC_YIELD:{name:"DYNAMIC_YIELD",id:"5e7e5243b8e05c48537f6068"}};var s=r(87633);s.pfw,s.JEZ,s.Ufp,s.FC9,s.tSZ,s.f7M,s.cHr,s.U8d,s.y0$,s.mEo,s.tVU,s.fjV,s.aFm,s.bcd,s.iFf,r(11288)},11288:(e,t,r)=>{r.d(t,{J:()=>d});var n=r(87633);const o=e=>e?`${e}/wrapperMessagingWithoutDetection.js`:"https://gdpr-tcfv2.sp-prod.net/wrapperMessagingWithoutDetection.js",i=({id:e,src:t,type:r,text:n,defer:o,async:i,target:a="head"})=>new Promise(((s,c)=>{const d=document.createElement("script");e&&(d.id=e),r&&(d.type=r),n&&(d.text=n),d.defer=o,d.async=i,t?(d.src=t,d.onload=s,d.onerror=c):s(),document.querySelector(a).appendChild(d)})),a=()=>{const{cmp:{accountId:e,baseEndpoint:t,mmsDomain:r,privacyManagerId:o,propertyId:i,propertyHref:a}}=(0,n.iEs)(),s=((e,t,r,n,o,i)=>`window._sp_ = {\n        config: {\n          accountId: ${e},\n          ${r?`mmsDomain: '${r}',`:""}\n          ${r?"wrapperAPIOrigin: 'https://wrapper-api.sp-prod.net/tcfv2',":""}\n          ${t?`baseEndpoint: '${t}',`:""}\n          ${n?`groupPmId: ${n},`:""}\n          ${o?`propertyId: ${o},`:""}\n          ${i?`propertyHref: '${i}',`:""}\n          events: {\n            onConsentReady: function () {\n              if (window.refreshAfterConsentChange) {\n                window.location.reload()\n              }\n            }\n          }\n        }\n    }`)(e,t,r,o,i,a);return s},s=e=>{window.tcfListeners=window.tcfListeners.filter((t=>t.eventStatus!==e.eventStatus))},c=e=>{const{cmp:{privacyManagerId:t,territory:r="gb"}}=(0,n.iEs)();window.tcfListeners=[],window.__tcfapi("addEventListener",2,((e,t)=>(r,n)=>{if(window.tcfListeners.find((e=>e.eventStatus===r.eventStatus)))return!1;window.tcfListeners.push(r),n&&("tcloaded"!==r.eventStatus&&"useractioncomplete"!==r.eventStatus||window.__tcfapi("getCustomVendorConsents",2,((e,t,r="gb")=>n=>{const o=(({consentedVendors:e,vendors:t,territory:r})=>{const n=e.concat(((e,t="gb")=>e.filter((e=>{var r,n;return null===(r=e.name)||void 0===r||null===(n=r.essential)||void 0===n?void 0:n.includes(t)})).map((e=>e.name.id)))(t,r));return n.filter(((e,t)=>n.indexOf(e)===t))})({consentedVendors:n.consentedVendors.map((e=>e._id)),vendors:e,territory:r}),i=e.filter((e=>!o.includes(e.name.id)));o.forEach((t=>(e=>t=>{const r=e.find((e=>e.name.id===t));r&&r.init&&r.init()})(e)(t))),i.forEach((e=>{var t;return null==e||null===(t=e.reject)||void 0===t?void 0:t.call(e)})),window.__tcfapi("removeEventListener",2,s,t)})(e,r.listenerId,t)))})(e,r)),window.consentPurposes=[],window.purposeConsentAction=e=>window.consentPurposes.push(e),window.purposeRejectAction=e=>window.consentPurposes=window.consentPurposes.filter((t=>t!==e)),t&&window._sp_&&(window.loadPrivacyManagerModal=()=>{window.refreshAfterConsentChange=!0,window._sp_.loadPrivacyManagerModal(t)})},d=e=>{(()=>{const{cmp:e}=(0,n.iEs)();if(e){const{baseEndpoint:t,mmsDomain:r}=e;if(void 0===t&&void 0===r||void 0!==t&&void 0!==r)throw new Error("CMP config should have baseEndpoint or mmsDomain defined");return Promise.all([i({id:"SP_STUB",type:"text/javascript",text:'!function () { var e = function () { var e, t = "__tcfapiLocator", a = [], n = window; for (; n;) { try { if (n.frames[t]) { e = n; break } } catch (e) { } if (n === window.top) break; n = n.parent } e || (!function e() { var a = n.document, r = !!n.frames[t]; if (!r) if (a.body) { var i = a.createElement("iframe"); i.style.cssText = "display:none", i.name = t, a.body.appendChild(i) } else setTimeout(e, 5); return !r }(), n.__tcfapi = function () { for (var e, t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; if (!n.length) return a; if ("setGdprApplies" === n[0]) n.length > 3 && 2 === parseInt(n[1], 10) && "boolean" == typeof n[3] && (e = n[3], "function" == typeof n[2] && n[2]("set", !0)); else if ("ping" === n[0]) { var i = { gdprApplies: e, cmpLoaded: !1, cmpStatus: "stub" }; "function" == typeof n[2] && n[2](i) } else a.push(n) }, n.addEventListener("message", (function (e) { var t = "string" == typeof e.data, a = {}; try { a = t ? JSON.parse(e.data) : e.data } catch (e) { } var n = a.__tcfapiCall; n && window.__tcfapi(n.command, n.version, (function (a, r) { var i = { __tcfapiReturn: { returnValue: a, success: r, callId: n.callId } }; t && (i = JSON.stringify(i)), e.source.postMessage(i, "*") }), n.parameter) }), !1)) }; "undefined" != typeof module ? module.exports = e : e() }();'}),i({id:"SP_SCRIPTS",text:a()}),i({id:"SP_DIALOG",src:o(t),defer:!0})])}return Promise.reject(new Error("CMP config not set. Aborting cmp module init. Please follow the link for troubleshooting: https://bit.ly/2HSFi4W"))})().then((()=>c(e))).catch((e=>{throw console.log(e),new Error("Failed to load SourcePoint scripts.")}))}},97415:(e,t,r)=>{r.d(t,{Hp:()=>c,IU:()=>p,To:()=>l});var n=r(87633),o=r(73187),i=r(16423);const a=(e,t)=>{const r=(0,i.Z)(t.getState(),["router","location","search"],"");return document.cookie.indexOf(e)>-1||r.indexOf(e)>-1};var s=r(11288);const c={CMP_ACCEPTED:`${o.o}/CMP_ACCEPTED`,CMP_REJECTED:`${o.o}/CMP_REJECTED`},d=(e,t)=>()=>e.dispatch({type:c.CMP_ACCEPTED,vendorName:t}),u=(e,t)=>()=>e.dispatch({type:c.CMP_REJECTED,vendorName:t}),l=(e,t=[])=>{if(!t.length)return;if((e=>a("cmp-test=rejected",e))(e))return void console.log("CMP: Reject all");const r=t.map((t=>({name:t,init:d(e,t.name),reject:u(e,t.name)})));if((e=>a("cmp-test=accepted",e))(e))return console.log("CMP: Enable all"),void(e=>{e.forEach((({init:e})=>e()))})(r);(0,s.J)(r)},p=(0,n.Lqw)({},{[c.CMP_ACCEPTED]:(e,t)=>({...e,[t.vendorName]:{enabled:!0}}),[c.CMP_REJECTED]:(e,t)=>({...e,[t.vendorName]:{enabled:!1}})})},78796:(e,t,r)=>{r.d(t,{Sg:()=>n,FY:()=>o,DB:()=>i,EZ:()=>a,fw:()=>s,So:()=>c,vy:()=>d,f4:()=>u,ZU:()=>l,eX:()=>p,lY:()=>v,oF:()=>m,Df:()=>y,q4:()=>f,Ag:()=>g,f$:()=>T,B4:()=>E,rq:()=>h,YB:()=>k,f3:()=>_});const n={DEPENDENCY_FAILURE:"DEPENDENCY_FAILURE",INELIGIBLE_BASKET:"INELIGIBLE_BASKET",INVALID_BASKET_REFERENCE:"INVALID_BASKET_REFERENCE",INVALID_BASKET:"INVALID_BASKET",CHALLENGE_REQUIRED:"CHALLENGE_REQUIRED",VOUCHER:"VOUCHER",WARNING:"WARNING",UNAUTHORIZED:"UNAUTHORIZED",MAXIMUM_CALL_DEPTH_EXCEEDED:"MAXIMUM_CALL_DEPTH_EXCEEDED",THREE_D_SECURE_REQUIRED:"THREE_D_SECURE_REQUIRED",DUPLICATE_ORDER:"DUPLICATE_ORDER",INVALID_PAYMENT_PIN:"INVALID_PAYMENT_PIN",INSUFFICIENT_CREDIT:"INSUFFICIENT_CREDIT",OFFER_CONFLICT:"OFFER_CONFLICT"},o=[n.INELIGIBLE_BASKET,n.DEPENDENCY_FAILURE,n.OFFER_CONFLICT],i="CATS_ADV_901",a="COM_WARN_00003",s="CATS_WARN_303",c="CATS_WARN_203",d="CATS_WARN_805",u="COM_90001",l="COM_00044",p="COM_00007",v="COM_00028",m="commerce",y="MAXIMUM_CALL_DEPTH_EXCEEDED_ERROR",f="CM_00005",g="COM_60000",T=["CATS_WARN_301","CATS_WARN_302"],E=["CATS_WARN_201","CATS_WARN_202",c],h={400:{2003:"IDENTITY_MALFORMED_AUTHORIZATION",COM_00002:"INVALID_OTT_USER_TOKEN",COM_00003:"EXPIRED_OTT_USER_TOKEN",OVP_00006:"INVALID_OTT_USER_TOKEN",OVP_00007:"EXPIRED_OTT_USER_TOKEN","authentication.missing.or.rejected":"INVALID_OTT_USER_TOKEN"}},k="OVP_02000",_=3},24136:(e,t,r)=>{r.d(t,{DI:()=>o.DI,Ur:()=>i.Ur,wm:()=>a.Hp,uJ:()=>a.uJ,XO:()=>o.XO,xt:()=>o.xt,iB:()=>o.iB,s_:()=>o.s_,Ek:()=>u.Ek,fk:()=>a.fk,uQ:()=>p.uQ,C0:()=>f,PP:()=>d.PP,i1:()=>c.i1,QB:()=>a.QB});var n=r(14890),o=r(64161),i=r(98326),a=r(94539),s=r(28876),c=r(55870),d=r(30471),u=r(85458),l=r(88299),p=r(83626),v=r(51747);const m=(0,n.combineReducers)({account:o.I6,availableProducts:i.I6,basket:a.I6,getBoxInfo:p.I6,creditBalance:s.I6,offers:d.I6,order:c.I6,deviceActivate:u.I6,deviceSignIn:l.I6,paymentDetails:v.I6});var y=r(78796);const f=({retained:e=!1}={})=>({id:y.oF,reducerMap:{commerce:m},retained:e})},64161:(e,t,r)=>{r.d(t,{I6:()=>u,DI:()=>p,XO:()=>v,s_:()=>m,xt:()=>y,iB:()=>f,o1:()=>g,D0:()=>T,sG:()=>E,Fr:()=>h});var n=r(16423),o=r(87633),i=r(20573),a=r(78796),s=r(62341);const{actionTypes:c,actionCreators:d,reducer:u,initialState:l}=(0,o.gi9)({prefix:a.oF,services:{createAccount:s.o1,getAccount:s.D0,updateAccount:s.sG,updateDeliveryAddresses:s.Fr}});function p(e){return(0,n.Z)(e,[a.oF,"account"])}const v=(0,i.P1)(p,(e=>{var t;return(null==e||null===(t=e.data)||void 0===t?void 0:t.billing)||[]})),m=(0,i.P1)(p,(e=>{var t;return(null==e||null===(t=e.data)||void 0===t?void 0:t.delivery)||[]})),y=(0,i.P1)(v,(e=>e.find((e=>e.default)))),f=(0,i.P1)(m,(e=>e.find((e=>e.default))));function g(e){return t=>{const r=(0,o.h2q)(),n=(0,o.KjM)(),i=(0,o.t3n)(),a=(0,o.MM8)();return t(d.createAccount({messoToken:r,ssoToken:n,umvToken:i,activeTerritory:a,data:e}))}}function T(e){return t=>{const r=(0,o.h2q)(),n=(0,o.KjM)(),i=(0,o.t3n)(),a=(0,o.MM8)();return t(d.getAccount({messoToken:r,ssoToken:n,umvToken:i,activeTerritory:a,mfaToken:e}))}}function E(e){return t=>{const r=(0,o.h2q)(),n=(0,o.KjM)(),i=(0,o.t3n)(),a=(0,o.MM8)();return t(d.updateAccount({messoToken:r,ssoToken:n,umvToken:i,activeTerritory:a,data:e}))}}function h(e){return t=>{const r=(0,o.h2q)(),n=(0,o.KjM)(),i=(0,o.t3n)(),a=(0,o.MM8)();return t(d.updateDeliveryAddresses({messoToken:r,ssoToken:n,umvToken:i,activeTerritory:a,data:e}))}}},98326:(e,t,r)=>{r.d(t,{I6:()=>u,Ur:()=>p,Xc:()=>v});var n=r(16423),o=r(87633),i=r(78796),a=r(62341),s=r(30471);const{actionTypes:c,actionCreators:d,reducer:u,initialState:l}=(0,o.gi9)({prefix:i.oF,name:"getAvailableProducts",services:{getAvailableProducts:a.Xc}});function p(e){return(0,n.Z)(e,[i.oF,"availableProducts"])}function v(e={includeOffers:!1}){return async t=>{const{includeOffers:r}=e,i={messoToken:(0,o.h2q)(),ssoToken:(0,o.KjM)(),umvToken:(0,o.t3n)()},a=await t(d.getAvailableProducts(i));if(r){const e=function(e){return(0,n.Z)(e,"payload.currentSubscriptions",[]).reduce(((e,t)=>[...e,...(0,n.Z)(t,"offers",[])]),[])}(a);e.length&&await t((0,s.Rg)(e))}return a}}},94539:(e,t,r)=>{r.d(t,{uJ:()=>d,ql:()=>l,Hp:()=>v,I6:()=>y,fk:()=>g,QB:()=>T});var n=r(87633),o=r(49963),i=r(78796),a=r(62341),s=r(4310),c=r(30471);function d(e){var t;return null==e||null===(t=e[i.oF])||void 0===t?void 0:t.basket}function u(e){var t;return((null==e||null===(t=e.payload)||void 0===t?void 0:t.offers)??[]).length>0}function l(e){var t;return i.FY.includes(null==e||null===(t=e.payload)||void 0===t?void 0:t.key)}const p=e=>async(...t)=>{const[r,o]=await e(...t);let a;return null!==r&&i.FY.includes(r.key)&&(a=r.basketReference),(0,n.$KD)(o)&&(a=o.basketReference),(0,n.$KD)(a)&&await(0,n.vcE)(a),[r,o]},{actionTypes:v,actionCreators:m,reducer:y,initialState:f}=(0,n.gi9)({prefix:i.oF,services:{createBasket:p(a.Y6),getBasket:p(a.fk),modifyBasket:p(a.Kv)}});function g(){return async e=>{const t=(0,n.sCF)(),r={messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)()};let o=(0,n.$KD)(t)?await e(m.getBasket({...r,basketReference:t})):await e(m.createBasket(r));return u(o)&&await e((0,c.Rg)(o.payload.offers)),l(o)&&(o=await e((0,s.f)(o))),o}}function T(e={},{depth:t=0}={}){return async r=>{const a=(0,n.sCF)(),d={messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)()};let p=(0,n.$KD)(a)?await r(m.modifyBasket({...e,...d,basketReference:a,depth:t})):await r(m.createBasket({...e,...d,depth:t}));return t>=i.f3||(u(p)&&await r((0,c.Rg)(p.payload.offers)),!function(e){var t;return i.Ag===(null==e||null===(t=e.payload)||void 0===t?void 0:t.errorCode)}(p)&&l(p)&&(p=await r((0,s.f)(p,{depth:t}))),Object.keys(e).includes("add")&&await(0,o.KY)(p.payload.products,e.add,p.payload.currency),Object.keys(e).includes("remove")&&await(0,o.QO)(p.payload.products,e.remove,p.payload.currency)),p}}},28876:(e,t,r)=>{r.d(t,{I6:()=>c,vC:()=>u});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.gi9)({prefix:o.oF,name:"getCreditBalance",service:i.vC});function u(){return e=>{const t=(0,n.t3n)(),r=(0,n.MM8)();return e(s.getCreditBalance({umvToken:t,activeTerritory:r}))}}},85458:(e,t,r)=>{r.d(t,{I6:()=>c,Ek:()=>u,j_:()=>l});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.G6J)({prefix:o.oF,name:"deviceActivate",service:i.j_});function u(e){var t;return null==e||null===(t=e[o.oF])||void 0===t?void 0:t.deviceActivate}function l({orderRequest:e,purchaseType:t,payment:r}={}){return o=>{const i={orderRequest:e,messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)(),purchaseType:t,payment:r};return o(s.deviceActivate(i))}}},88299:(e,t,r)=>{r.d(t,{I6:()=>c,hR:()=>u});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.G6J)({prefix:o.oF,name:"deviceSignIn",service:i.hR});function u(){return e=>{const t={journeyId:(0,n.jOu)(),messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)()};return e(s.deviceSignIn(t))}}},83626:(e,t,r)=>{r.d(t,{I6:()=>c,uQ:()=>u,uu:()=>l});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.G6J)({prefix:o.oF,name:"getBoxInfo",service:i.uu});function u(e){var t;return null==e||null===(t=e[o.oF])||void 0===t?void 0:t.getBoxInfo}function l(){return e=>{const t={journeyId:(0,n.jOu)(),messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)()};return e(s.getBoxInfo(t))}}},4310:(e,t,r)=>{r.d(t,{f:()=>c});var n=r(78796),o=r(94539),i=r(98326);const a=e=>((null==e?void 0:e.products)??[]).flatMap((e=>{const t=e.includes||[];return[e.staticId,...t]}));function s({errors:e=[],availableProducts:t,key:r,staticIds:n}={}){const o=e.reduce(((e,o)=>{const i=((null==o?void 0:o[r])??[]).filter((e=>n.includes(e)));if(0===i.length)return e;const a=((e,t)=>e.reduce(((e,r)=>({...e,[r]:t[r]})),{}))(i,t);return{...e,...a}}),{});return Object.values(o)}function c(e={},{depth:t=0}={}){const{payload:r}=e;return async(c,d)=>{const u=await async function(e,t){var r,n,o;return null!==(r=(0,i.Ur)(t()))&&void 0!==r&&r.data||await e((0,i.Xc)()),((null===(n=(0,i.Ur)(t()))||void 0===n||null===(o=n.data)||void 0===o?void 0:o.products)??[]).reduce(((e,t)=>({...e,[t.staticId]:t})),{})}(c,d),l=(e=>{var t;return((null==e||null===(t=e.data)||void 0===t?void 0:t.errors)??[]).filter((({code:e})=>[...n.B4,...n.f$,n.vy].includes(e)))})(r),p=((e,t)=>[...new Set([...Object.keys(t),...a(e)])])(r,u),v=s({errors:l,availableProducts:u,key:"subjects",staticIds:p}),m=s({errors:l,availableProducts:u,key:"references",staticIds:p}),y=function({errors:e=[]}){return[...e.filter((e=>e.code===n.So)).reduce(((e,t)=>{var r;return null==t||null===(r=t.subjects)||void 0===r||r.forEach((t=>{e.add(t)})),e}),new Set)].map((e=>({code:e})))}({errors:l});return 0===m.length&&0===v.length&&0===y.length?e:c((0,o.QB)({add:m,remove:[...v,...y]},{depth:t+1}))}}},30471:(e,t,r)=>{r.d(t,{I6:()=>c,PP:()=>u,Rg:()=>l});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.gi9)({prefix:o.oF,mergeStrategy:(e,t)=>({...e,...t.payload}),services:{getOffers:i.Rg}});function u(e){var t;return null==e||null===(t=e[o.oF])||void 0===t?void 0:t.offers}function l(e,t){return(r,n)=>{var o;const i=(null===(o=u(n()))||void 0===o?void 0:o.data)??{},a=Object.keys(i);var c,d;return(c=e.map((e=>e.staticId)),(d=a)&&d.length?c.filter((e=>!d.includes(e))):c).length>0?r(s.getOffers({offers:e,partnerId:t})):Promise.resolve()}}},55870:(e,t,r)=>{r.d(t,{I6:()=>l,i1:()=>m,pm:()=>y});var n=r(16423),o=r(87633),i=r(78796),a=r(62341),s=r(94539),c=r(4310);const{actionTypes:d,actionCreators:u,reducer:l,initialState:p}=(0,o.G6J)({prefix:i.oF,name:"submitOrder",service:(v=a.pm,async(...e)=>{const[t,r]=await v(...e);return t||(0,o.aM1)(),[t,r]})});var v;function m(e){return(0,n.Z)(e,[i.oF,"order"])}function y(e={}){return async t=>{const r={basketReference:(0,o.sCF)(),messoToken:(0,o.h2q)(),ssoToken:(0,o.KjM)(),umvToken:(0,o.t3n)(),activeTerritory:(0,o.MM8)(),data:e},n=await t(u.submitOrder(r));return(0,s.ql)(n)&&await t((0,c.f)(n)),n}}},51747:(e,t,r)=>{r.d(t,{I6:()=>c,sS:()=>u});var n=r(87633),o=r(78796),i=r(62341);const{actionTypes:a,actionCreators:s,reducer:c,initialState:d}=(0,n.G6J)({prefix:o.oF,name:"getPaymentDetails",service:i.sS});function u(e=!1){return t=>{const r={messoToken:(0,n.h2q)(),ssoToken:(0,n.KjM)(),umvToken:(0,n.t3n)(),activeTerritory:(0,n.MM8)(),...e&&{mfaToken:e}};return t(s.getPaymentDetails(r))}}},62341:(e,t,r)=>{r.d(t,{o1:()=>s,Y6:()=>O,j_:()=>te,hR:()=>re,D0:()=>v,Xc:()=>$,fk:()=>j,uu:()=>ne,vC:()=>de,Rg:()=>ie,sS:()=>H,Kv:()=>V,pm:()=>ee,sG:()=>m,Fr:()=>Y});var n=r(87633),o=r(16423),i=r(78796);function a(e){let t=e.key;const r=(0,o.Z)(e,"data.errors",[]);return r.length&&r.find((({code:t})=>i.rq[e.status]&&i.rq[e.status][t]))&&(t=i.Sg.UNAUTHORIZED),[{...e,key:t}]}function s(e={}){const t="CREATE_ACCOUNT",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},data:{type:"object"}},required:["umvToken","data"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{authScheme:i,device:s,platform:c,proposition:d,provider:u,territory:l}=o,{data:p,messoToken:v,ssoToken:m,umvToken:y,activeTerritory:f}=e,g=(0,n.wUd)({device:s,messoToken:v,platform:c,proposition:d,provider:u,ssoToken:m,territory:l,tokenType:i,umvToken:y,activeTerritory:f}),{hostname:T,account:E}=o.endpoints.commerceEdge;return(0,n.WY0)({url:`${T}${E}`,method:"post",data:p,headers:g,handleError:a,service:t,withRequestId:!0,withCredentials:!0})}const c=JSON.parse('{"u2":"@sky-uk-ott/ott-sas-commerce"}');function d(e){return[null,{billing:(0,o.Z)(e,"data.addresses.billing",[]),delivery:(0,o.Z)(e,"data.addresses.delivery",[])}]}var u=r(67813);function l({error:e,response:t={}}={}){var r,n;e&&(null==e?void 0:e.errorCode)!==i.YB||(0,u.a)({billing_address:Boolean(null==t||null===(r=t.billing)||void 0===r?void 0:r.length),delivery_address:Boolean(null==t||null===(n=t.delivery)||void 0===n?void 0:n.length)})}function p({service:e,key:t,status:r}={}){return!("GET_ACCOUNT"===e&&t===n.Sgr.NOT_FOUND||"GET_PAYMENT_DETAILS"===e&&t===n.Sgr.NOT_FOUND||"SUBMIT_ORDER"===e&&[i.Sg.INELIGIBLE_FREE_TRIAL,i.Sg.CHALLENGE_REQUIRED].includes(t)||"GET_AVAILABLE_PRODUCTS"===e&&t===i.Sg.UNAUTHORIZED||("MODIFY_BASKET"===e||"CREATE_BASKET"===e)&&t===i.Sg.VOUCHER||"GET_CREDIT_BALANCE"===e&&404===r)}function v(e={}){const t="GET_ACCOUNT",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},mfaToken:{type:"string"},activeTerritory:{type:"string"}},required:["umvToken"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const{timeout:o=1e4,url:i,authScheme:s,device:u,platform:v,proposition:m,provider:y,territory:f}=(0,n.iEs)({moduleName:c.u2,key:"ACCOUNT",fallback:e=>({url:`${e.endpoints.commerceEdge.hostname}${e.endpoints.commerceEdge.account}`})}),{messoToken:g,ssoToken:T,umvToken:E,mfaToken:h,activeTerritory:k}=e,_=(0,n.wUd)({device:u,messoToken:g,platform:v,proposition:m,provider:y,ssoToken:T,territory:f,tokenType:s,umvToken:E,mfaToken:h,activeTerritory:k});return(0,n.WY0)({url:i,method:"get",headers:_,handleResponse:d,handleAnalytics:l,handleError:a,timeout:o,service:t,withCredentials:!0,withRequestId:!0,shouldCaptureMessage:p})}function m(e={}){const t="UPDATE_ACCOUNT",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},data:{type:"object"}},required:["umvToken","data"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const{url:o,authScheme:i,device:s,platform:d,proposition:u,provider:l,territory:p}=(0,n.iEs)({moduleName:c.u2,key:"ACCOUNT",fallback:e=>({url:`${e.endpoints.commerceEdge.hostname}${e.endpoints.commerceEdge.account}`})}),{data:v,messoToken:m,ssoToken:y,umvToken:f,activeTerritory:g}=e,T=(0,n.wUd)({device:s,messoToken:m,platform:d,proposition:u,provider:l,ssoToken:y,territory:p,tokenType:i,umvToken:f,activeTerritory:g});return(0,n.WY0)({url:o,method:"put",data:v,headers:T,handleError:a,service:t,withRequestId:!0,withCredentials:!0})}const y=e=>(0,n.$KD)(e.staticId)&&((0,n.$KD)(e.paymentAmount)||(0,n.$KD)(e.category)),f=e=>(0,n.$KD)(e.code);function g({add:e=[],remove:t=[],segments:r=[],finalPricingRequired:n=!1}={}){const o={finalPricingRequired:n},i=[],a=[];return e.length&&e.forEach((e=>{const t={action:"ADD"};e.duration&&(t.duration=e.duration),y(e)&&(t.code=e.staticId,i.push(t)),f(e)&&(t.code=e.code,a.push(t))})),t.length&&t.forEach((e=>{const t={action:"REMOVE"};e.duration&&(t.duration=e.duration),y(e)&&(t.code=e.staticId,i.push(t)),f(e)&&(t.code=e.code,a.push(t))})),i.length&&(o.products=i),a.length&&(o.vouchers=a),r.length&&(o.segmentTypes=r),o}var T=r(57135);function E(e,t){const r={staticId:e.staticId,includes:e.includes,offers:e.offers,category:e.category,conditionalPrice:e.conditional_price},n=e["tenure_non-discounted_amount_total"];if(e.nextRenewalDueDate&&(r.nextRenewalDueDate=e.nextRenewalDueDate),e.detailedOffers&&(r.detailedOffers=e.detailedOffers),e.subscriptionType&&(r.subscriptionType=e.subscriptionType),0===(e.includes??[]).length)r.duration=e.duration,r.paymentAmount={original:e.fullPrice,nonRecurring:e.toPayToday,recurring:e.nextRenewalAmount,deferred:e.paymentDeferred,nonDiscounted:n},r.saving={amount:e.saving_amount,percentage:e.saving_percentage};else if(1===(e.includes??[]).length){const o=t.find((({staticId:t})=>t===e.includes[0]));r.includedProducts=function(e){if(!e)return[];const t={...e,conditionalPrice:e.conditional_price};return delete t.conditional_price,[t]}(o),!r.subscriptionType&&o.subscriptionType&&(r.subscriptionType=o.subscriptionType),"TRIAL"===o.subscriptionType&&(r.paymentAmount={nonRecurring:o.toPayToday,recurring:o.nextRenewalAmount,deferred:o.paymentDeferred}),"UPFRONT_PAID"===o.subscriptionType&&(r.duration=e.duration,r.paymentAmount={fullPrice:e.fullPrice,original:n,nonRecurring:e.toPayToday,recurring:o.nextRenewalAmount,deferred:o.paymentDeferred,nonDiscounted:n},r.saving={amount:e.saving_amount,percentage:e.saving_percentage})}else r.paymentAmount={original:n,nonRecurring:e.toPayToday,nonDiscounted:n},r.saving={amount:e.saving_amount,percentage:e.saving_percentage},r.bundledProducts=t.filter((({staticId:t})=>e.includes.includes(t))).map((e=>E(e,t)));return r}const h=e=>{var t;const r=(null===(t=e.data)||void 0===t?void 0:t.products)??[];return r.filter((e=>!e.included_by)).map((e=>E(e,r)))};function k(e){const t=(e=>{const t=(0,o.Z)(e,"data.advice",[]).reduce(((e,t)=>t.code===i.DB?{availableProducts:[...e.availableProducts,...t.references]}:e),{availableProducts:[]});return t.availableProducts=(0,T.Z)(t.availableProducts),t})(e),r=(e=>(0,o.Z)(e,"data.basketReference"))(e),n=(e=>(0,o.Z)(e,"data.currency"))(e),a=(e=>(0,o.Z)(e,"data.warnings",[]).filter((e=>![i.fw,i.EZ].includes(e.code))))(e),s=(e=>(0,o.Z)(e,"data.offers",[]).map((e=>({staticId:e.id,code:e.voucherCode,savings:(0,o.Z)(e,"discounts",[]).map((e=>{const t={duration:e.duration};return"Amount"===e.type&&(t.amount=e.amount),"Percentage"===e.type&&(t.percentage=e.amount),t}))}))))(e),c=(e=>(0,o.Z)(e,"data.paymentMethodRequired",!0))(e),d=h(e),u=(e=>{const t=(0,o.Z)(e,["data","basketPaymentSummary"],{}),r=(0,o.Z)(e,["data","totals"],{}),n=(0,o.Z)(r,"toPayToday","0.00");return{creditBalance:{beforePayment:(0,o.Z)(t,"creditBalancePrePurchase","0.00"),afterPayment:(0,o.Z)(t,"creditBalancePostPurchase","0.00"),used:(0,o.Z)(t,"creditAmount","0.00")},paymentAmount:{nonRecurring:n,nonRecurringInclusiveOfTax:(0,o.Z)(r,"toPayTodayInclusiveOfTax",n),taxOnSale:(0,o.Z)(r,"taxOnSale","0.00"),recurring:(0,o.Z)(r,"monthlyCost","0.00"),paymentAccountAmount:(0,o.Z)(t,"paymentAccountAmount","0.00")}}})(e),l=(e=>{const t=(0,o.Z)(e,"data.warnings",[]).filter((e=>[i.fw,i.EZ].includes(e.code))).reduce(((e={},t)=>t.code===i.fw?{requiresPass:[...e.requiresPass,...t.subjects]}:e),{requiresPass:[]});return t.requiresPass=(0,T.Z)(t.requiresPass),t})(e);if(a.length){const e={key:i.Sg.WARNING,status:0,data:{errors:a}},t=a.some((({code:e})=>i.B4.includes(e))),n=a.some((({code:e})=>i.f$.includes(e))),o=a.some((({code:e})=>e===i.vy));return n&&(e.key=i.Sg.DEPENDENCY_FAILURE,e.basketReference=r,e.products=d),t&&(e.key=i.Sg.INELIGIBLE_BASKET,e.basketReference=r),o&&(e.key=i.Sg.OFFER_CONFLICT,e.basketReference=r,e.products=d),[e]}return[null,{advice:t,basketReference:r,currency:n,offers:s,products:d,summary:u,warnings:l,paymentMethodRequired:c}]}var _=r(24966);const I=[e=>e.some((({code:e})=>e===i.Df))?{key:i.Sg.MAXIMUM_CALL_DEPTH_EXCEEDED}:null,(e,t)=>e.find((({code:e})=>i.rq[t.status]&&i.rq[t.status][e]))?{key:i.Sg.UNAUTHORIZED}:null,e=>{const t=e.find((({code:e})=>e===i.f4));return t?{key:(0,o.Z)(t,"error.errorCode",i.f4)}:null},e=>{const t=/^COM_6[0-9]{4}|COM_00019|COM_00021|duplicate\.voucher\.error$/;return e.some((({code:e})=>t.test(e)))?{key:i.Sg.VOUCHER}:null},e=>e.some((({code:e})=>"invalid.basket.token"===e))?{key:i.Sg.INVALID_BASKET_REFERENCE}:null,e=>e.some((({code:e})=>"invalid.product.error"===e))?{key:i.Sg.INVALID_BASKET}:null],b=(e,t)=>{const{depth:r=0}=e;if(r>=i.f3){const e=[...(0,o.Z)(t,"data.errors",[]),{code:i.Df}];(0,_.Z)(t,"data.errors",e)}return t};function A(e){const t=(0,o.Z)(e,"data.errors",[]);if(!t.length)return[e];const r=I.reduce(((r,n)=>r||n(t,e)),null);return[{...e,...r}]}const R=(e,t)=>{var r,n;return null!=e&&null!==(r=e.paymentAmount)&&void 0!==r&&r.deferred?e.paymentAmount.deferred:t?null===(n=t.savings)||void 0===n?void 0:n[0].duration:null!=e&&e.duration?e.duration:void 0},C=({response:e})=>{var t;const r=(null==e?void 0:e.products)??[],o=(null==e?void 0:e.offers)??[],i=(null==e?void 0:e.summary)??[],a=null==e?void 0:e.currency,s=r.map((e=>{var t,r,i;const a=((e,t=[])=>{const r=t[0];return e.find((e=>e.staticId===r))})(o,e.offers);return(0,n.J1K)(n.IyD,{product_id:e.staticId,price:null==e||null===(t=e.paymentAmount)||void 0===t?void 0:t.nonRecurring,original_price:null==e||null===(r=e.paymentAmount)||void 0===r?void 0:r.original,recurring_price:null==e||null===(i=e.paymentAmount)||void 0===i?void 0:i.recurring,category:e.category,name:e.name,duration:R(e,a),offer_id:null==a?void 0:a.staticId,offer_name:null==a?void 0:a.code},n.KtT)})).filter((e=>e));return{[n.KtT]:s,[n._XE]:(0,n.J1K)(n.THG,{total:null==i||null===(t=i.paymentAmount)||void 0===t?void 0:t.nonRecurring,currency:a,products:s})}},D=({originalServiceData:e,property:t})=>{const r=(null==e?void 0:e[t])??[];if(!r.length)return{};const o="add"===t?n.OM5:n.Ei$;return{[o]:r.filter((e=>e.staticId)).map((e=>{var t,r;const i=e.paymentAmount||(null===(t=e.prices)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.paymentAmount);return(0,n.J1K)(n.IyD,{product_id:e.staticId,price:"0.00"!==(null==i?void 0:i.nonRecurring)?null==i?void 0:i.nonRecurring:null==i?void 0:i.recurring},o)}))}},S=e=>({response:t,request:r,error:o})=>(({response:e,error:t,originalServiceData:r})=>{if(t)return!1;const o={...C({response:e}),...D({originalServiceData:r,property:"add"}),...D({originalServiceData:r,property:"remove"})};(0,n.y_H)(o),o[n.OM5]&&(0,n.qey)(n.OM5,{[n.OM5]:o[n.OM5]}),o[n.Ei$]&&(0,n.qey)(n.Ei$,{[n.Ei$]:o[n.Ei$]}),(0,n.qey)(n.KtT,o),(0,n.qey)(n._XE,o)})({response:t,request:r,error:o,originalServiceData:e}),w=e=>{const t={};return e.products&&(t.products=e.products.map((e=>`${e.code}:${e.duration?`${e.duration}:`:""}${e.action}`))),e.vouchers&&(t.vouchers=e.vouchers.map((e=>`${e.code}:${e.action}`))),t};function O(e={}){const t="CREATE_BASKET",r=(0,n.FFq)({object:e,schema:{properties:{add:{type:"array"},messoToken:{type:"string"},remove:{type:"array"},segments:{type:"array"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},finalPricingRequired:{type:"boolean"}}}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=g({add:e.add,remove:e.remove,segments:e.segments,finalPricingRequired:e.finalPricingRequired}),i=(0,n.iEs)(),{authScheme:a,device:s,platform:c,proposition:d,provider:u,territory:l}=i,{messoToken:p,ssoToken:v,umvToken:m,activeTerritory:y}=e,f=(0,n.wUd)({device:s,messoToken:p,platform:c,proposition:d,provider:u,ssoToken:v,territory:l,tokenType:a,umvToken:m,activeTerritory:y}),{hostname:T,basket:E}=i.endpoints.commerceEdge,h=T+E;return(0,n.WY0)({data:o,handleError:t=>A(b(e,t)),handleResponse:k,handleAnalytics:S(e),headers:f,method:"post",service:t,timeout:1e4,withCredentials:!0,withRequestId:!0,optionalTransactionData:w(o),url:h})}function N(e="",t=[{}]){return!e||!Array.isArray(t)||t.length<1?e:e.replace("{{recurring}}",t[0].recurring).replace("{{original}}",t[0]["tenure_non-discounted_amount_total"]).replace("{{nonRecurring}}",t[0]["non-recurring"])}function M(e=[]){return e.map((e=>({duration:(null==e?void 0:e.duration)??"",paymentAmount:{original:(null==e?void 0:e["tenure_non-discounted_amount_total"])??"",nonRecurring:(null==e?void 0:e["non-recurring"])??"",recurring:(null==e?void 0:e.recurring)??"",futurePriceRecurring:null==e?void 0:e.future_price_recurring,futurePriceRecurringEffectiveDate:null==e?void 0:e.future_price_recurring_effective_date},saving:{amount:(null==e?void 0:e.saving_amount)??"",percentage:(null==e?void 0:e.saving_percentage)??""},conditionalPrice:(null==e?void 0:e.conditional_price)??!1})))}function U(e=[],t=""){var r;return(null===(r=e.find((e=>e.staticId===t)))||void 0===r?void 0:r.prices)||[]}function P(e){var t,r,n,o;const i=null==e||null===(t=e.data)||void 0===t?void 0:t.currency,a=((null==e||null===(r=e.data)||void 0===r?void 0:r.products)??[]).map((e=>{var t,r,n,o,i,a,s,c,d,u,l,p,v,m,y,f,g,T,E,h,k,_,I,b,A,R,C,D,S,w,O,U,P,F;const L=(null==e?void 0:e.price)??[],q=(null==e||null===(t=e.data)||void 0===t||null===(r=t.relationships)||void 0===r||null===(n=r.signup)||void 0===n||null===(o=n.data[0])||void 0===o||null===(i=o.relationships)||void 0===i||null===(a=i.images)||void 0===a?void 0:a.data[0])??{},$=null==e||null===(s=e.data)||void 0===s||null===(c=s.relationships)||void 0===c||null===(d=c.signup)||void 0===d||null===(u=d.data[0])||void 0===u||null===(l=u.attributes)||void 0===l?void 0:l.terms;return{staticId:null==e?void 0:e.static_id,category:null==e?void 0:e.category,businessId:(null==e?void 0:e.business_id)??"",title:null==e||null===(p=e.data)||void 0===p||null===(v=p.attributes)||void 0===v?void 0:v.title,available:null==e?void 0:e.available,saleable:null==e||null===(m=e.data)||void 0===m||null===(y=m.attributes)||void 0===y?void 0:y.saleable,type:null==e||null===(f=e.data)||void 0===f||null===(g=f.attributes)||void 0===g?void 0:g.itemType,terms:N($,L),priceIncreaseMessage:null==e||null===(T=e.data)||void 0===T||null===(E=T.attributes)||void 0===E?void 0:E.priceIncreaseMessage,image:{id:(null==q?void 0:q.id)??"",url:(null==q||null===(h=q.attributes)||void 0===h?void 0:h.url)??"",title:(null==q||null===(k=q.attributes)||void 0===k?void 0:k.title)??"",altText:(null==q||null===(_=q.attributes)||void 0===_?void 0:_.alttext)??"",height:(null==q||null===(I=q.attributes)||void 0===I?void 0:I.height)??"",width:(null==q||null===(b=q.attributes)||void 0===b?void 0:b.width)??""},copy:{available:(null==e||null===(A=e.data)||void 0===A||null===(R=A.relationships)||void 0===R||null===(C=R.mypasses)||void 0===C||null===(D=C.data[0])||void 0===D||null===(S=D.attributes)||void 0===S?void 0:S.availableText)??"",purchased:(null==e||null===(w=e.data)||void 0===w||null===(O=w.relationships)||void 0===O||null===(U=O.mypasses)||void 0===U||null===(P=U.data[0])||void 0===P||null===(F=P.attributes)||void 0===F?void 0:F.activeText)??""},prices:M(L)}})),s=((null==e||null===(n=e.data)||void 0===n?void 0:n.currentEntitlements)??[]).map((e=>({id:null==e?void 0:e.id,state:null==e?void 0:e.state,name:null==e?void 0:e.name,staticId:null==e?void 0:e.productStaticId,partner:(null==e?void 0:e.sourcePartner)??!1,billingType:(null==e?void 0:e.billingType)??"",startDate:null==e?void 0:e.startDate,endDate:null==e?void 0:e.endDate}))),c=((null==e||null===(o=e.data)||void 0===o?void 0:o.currentSubscriptions)??[]).map((e=>{const t=null==e?void 0:e.product,r=null==t?void 0:t.staticId;return{product:t,allowedOperations:(null==e?void 0:e.allowedOperations)??[],id:null==e?void 0:e.id,state:null==e?void 0:e.state,nextRenewalDueDate:(null==e?void 0:e.nextRenewalDueDate)??!1,cancellationEffectiveDate:(null==e?void 0:e.cancellationEffectiveDate)??!1,nextRenewalAmount:(null==e?void 0:e.nextRenewalAmount)??!1,staticId:r,type:null==e?void 0:e.product.context.subscriptionType,offers:(n=null==e?void 0:e.product.context.offers,Array.isArray(n)?n.map((e=>{if(e.indefinite_duration){const{indefinite_duration:t,...r}=e;return{...r,indefiniteDuration:t}}return e})):n),contextStartDate:null==e?void 0:e.product.context.startDate,partner:(null==e?void 0:e.product.context.partner)??!1,retryWindow:(null==e?void 0:e.retryWindow)??!1,offerAllowed:null==e?void 0:e.offerAllowed,upfrontAllowed:null==e?void 0:e.upfrontAllowed,conditionalPrice:null==e?void 0:e.conditionalPrice,price:U(a,r)};var n}));return[null,{currency:i,products:a,currentEntitlements:s,currentSubscriptions:c}]}function F(e,t){const r=(0,n.$fO)();if(!r)return null;r.setContext(e,{currentSubscriptions:(0,o.Z)(t,"currentSubscriptions",[]).map((e=>e.staticId)).filter((e=>e)),currentEntitlements:(0,o.Z)(t,"currentEntitlements",[]).map((e=>e.name)).filter((e=>e))})}function L(e){let t=e.key;const r=(0,o.Z)(e,"data.errors",[]);return r.length&&r.find((({code:t})=>i.rq[e.status]&&i.rq[e.status][t]))&&(t=i.Sg.UNAUTHORIZED),[{...e,key:t}]}function q({error:e,response:{currentEntitlements:t=[],currentSubscriptions:r=[],products:o=[]}={}}){if(e)return!1;const{proposition:i}=(0,n.iEs)(),a={product_holding:t.map((e=>{var t;const{billingType:a="",staticId:s,state:c,name:d}=e,u=o.find((e=>e.staticId===s)),l=null==u||null===(t=u.prices)||void 0===t?void 0:t[0],p=(null==e?void 0:e.partner)||i;if("recurring"===a.toLowerCase()){var v,m,y,f,g;const t=r.find((t=>t.staticId===e.staticId)),o=(e=>{var t;const r=null==e||null===(t=e.offers)||void 0===t?void 0:t[0];return!!r&&(e=>{const t=new Date;return new Date(e).setHours(0,0,0,0)<=t.setHours(0,0,0,0)})(null==r?void 0:r.startDate)})(t)?(e=>{var t,r;return null!=e&&null!==(t=e.offers)&&void 0!==t&&t.length?null===(r=e.offers[0])||void 0===r?void 0:r.staticId:null})(t):void 0,i=null==t||null===(v=t.state)||void 0===v?void 0:v.toLowerCase(),a={...e,category:null==u?void 0:u.category,type:null==t||null===(m=t.type)||void 0===m?void 0:m.toUpperCase(),duration:null==t||null===(y=t.product)||void 0===y||null===(f=y.context)||void 0===f?void 0:f.duration,product_id:s??e.name,original_price:null==l||null===(g=l.paymentAmount)||void 0===g?void 0:g.recurring,recurring_price:(E=null==t?void 0:t.nextRenewalAmount,"string"==typeof E?E:void 0),state:i,cancellation_effective_date:"active"!==i?null==t?void 0:t.cancellationEffectiveDate:void 0,source:p.toLowerCase(),...o&&{offer_id:o}};return(0,n.J1K)(n.IyD,a,n.Q_t)}{var T;const t={...e,category:(null==u?void 0:u.category)||d,type:a.toUpperCase(),source:p.toLowerCase(),product_id:s??e.name,original_price:null==l||null===(T=l.paymentAmount)||void 0===T?void 0:T.nonRecurring,state:c.toLowerCase()};return(0,n.J1K)(n.IyD,t,n.Q_t)}var E})).filter((e=>e))};(0,n.f4L)({data:a,event:n.Q_t}),(0,n.qey)(n.Q_t,a)}function $(e={}){const t="GET_AVAILABLE_PRODUCTS",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"}}}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{authScheme:i,device:a,platform:s,proposition:c,provider:d,territory:u}=o,{messoToken:l,ssoToken:v,umvToken:m}=e,y=(0,n.wUd)({device:a,messoToken:l,platform:s,proposition:c,provider:d,ssoToken:v,territory:u,tokenType:i,umvToken:m}),{hostname:f,availableProducts:g}=o.endpoints.commerceEdge,T=f+g;return(0,n.WY0)({headers:y,service:t,handleResponse:P,handleError:L,handleAnalytics:q,setSentryContext:F,url:T,timeout:1e4,withCredentials:!0,withRequestId:!0,shouldCaptureMessage:p})}function j(e){const t="GET_BASKET",r=(0,n.FFq)({object:e,schema:{properties:{basketReference:{type:"string"},messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"}},required:["basketReference"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{authScheme:i,device:a,platform:s,proposition:c,provider:d,territory:u,endpoints:l}=o,{messoToken:p,ssoToken:v,umvToken:m,activeTerritory:y}=e,f=(0,n.wUd)({device:a,messoToken:p,platform:s,proposition:c,provider:d,ssoToken:v,territory:u,tokenType:i,umvToken:m,activeTerritory:y}),{hostname:g,basket:T}=l.commerceEdge,E=`${g+T}/${e.basketReference}`;return(0,n.WY0)({headers:f,handleError:A,handleResponse:k,handleAnalytics:S(e),service:t,url:E,timeout:1e4,withRequestId:!0,withCredentials:!0})}const x={MASTERCARD:["mc","mcdebit","mccredit","mcstandardcredit","mcstandarddebit","mcpremiumcredit","mcpremiumdebit","mcsuperpremiumcredit","mcsuperpremiumdebit","mccommercialcredit","mccommercialdebit","mccommercialpremiumcredit","mccommercialpremiumdebit","mccorporatecredit","mccorporatedebit","mcpurchasingcredit","mcpurchasingdebit","mcfleetcredit","mcfleetdebit","mcpro","mc_applepay","mc_androidpay","maestro","bijcard"],VISA:["visa","visadebit","visacredit","visastandardcredit","visastandarddebit","visapremiumcredit","visapremiumdebit","visasuperpremiumcredit","visasuperpremiumdebit","visacommercialcredit","visacommercialdebit","visacommercialpremiumcredit","visacommercialpremiumdebit","visacommercialsuperpremiumcredit","visacommercialsuperpremiumdebit","visacorporatecredit","visacorporatedebit","visapurchasingcredit","visapurchasingdebit","visafleetcredit","visafleetdebit","visadankort","visaproprietary","visa_applepay","visa_androidpay","vpay","electron"],PAYPAL:["paypal","paypal_ecs"],AMEX:["amex","amex_applepay"]};function Z(e){for(const t of Object.keys(x))if(x[t].includes(e))return t}function B(e){return[null,{paymentAccounts:(0,o.Z)(e,"data.paymentAccounts",[]).map((e=>({paymentToken:(0,o.Z)(e,"paymentToken"),paymentProvider:(0,o.Z)(e,"paymentProvider"),paymentMethod:Z((0,o.Z)(e,"paymentMethod"))||(0,o.Z)(e,"paymentMethod"),lastDigits:(0,o.Z)(e,"lastDigits"),expiryDate:(0,o.Z)(e,"expiryDate"),customerReference:(0,o.Z)(e,"customerReference"),cardAlias:(0,o.Z)(e,"cardAlias"),signupEmail:(0,o.Z)(e,"signupEmail"),defaultPaymentAccount:(0,o.Z)(e,"defaultPaymentAccount",!1)})))}]}function K(e){const t=(0,o.Z)(e,"data.errors",[]);let r=e.key;if(t.length){if(t.some((({code:e})=>"COM_00005"===e)))return[null,{paymentAccounts:[]}];t.find((({code:t})=>i.rq[e.status]&&i.rq[e.status][t]))&&(r=i.Sg.UNAUTHORIZED)}return[{...e,key:r}]}function H(e={}){const t="GET_PAYMENT_DETAILS",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},mfaToken:{type:"string"},activeTerritory:{type:"string"}},required:["umvToken"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{authScheme:i,device:a,platform:s,proposition:c,provider:d,territory:u}=o,{messoToken:l,ssoToken:v,umvToken:m,mfaToken:y,activeTerritory:f}=e,g=(0,n.wUd)({device:a,messoToken:l,platform:s,proposition:c,provider:d,ssoToken:v,territory:u,tokenType:i,umvToken:m,mfaToken:y,activeTerritory:f}),{hostname:T,paymentDetails:E}=o.endpoints.commerceEdge,h=T+E;return(0,n.WY0)({headers:g,service:t,timeout:1e4,handleResponse:B,handleError:K,url:h,withCredentials:!0,withRequestId:!0,shouldCaptureMessage:p})}function V(e){const t="MODIFY_BASKET",r=(0,n.FFq)({object:e,schema:{properties:{add:{type:"array"},basketReference:{type:"string"},messoToken:{type:"string"},remove:{type:"array"},segments:{type:"array"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},finalPricingRequired:{type:"boolean"}},required:["basketReference"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=g({add:e.add,remove:e.remove,segments:e.segments,finalPricingRequired:e.finalPricingRequired}),i=(0,n.iEs)(),{authScheme:a,device:s,platform:c,proposition:d,provider:u,territory:l}=i,{messoToken:v,ssoToken:m,umvToken:y,activeTerritory:f}=e,T=(0,n.wUd)({device:s,messoToken:v,platform:c,proposition:d,provider:u,ssoToken:m,territory:l,tokenType:a,umvToken:y,activeTerritory:f}),{hostname:E,basket:h}=i.endpoints.commerceEdge,_=`${E+h}/${e.basketReference}`;return(0,n.WY0)({data:o,handleError:t=>A(b(e,t)),handleResponse:k,handleAnalytics:S(e),headers:T,method:"put",service:t,timeout:1e4,withCredentials:!0,withRequestId:!0,url:_,optionalTransactionData:w(o),shouldCaptureMessage:p})}function Y(e={}){const t="UPDATE_DELIVERY_ADDRESSES",r=(0,n.FFq)({object:e,schema:{properties:{messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},data:{type:"object"}},required:["umvToken","data"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{authScheme:i,device:s,platform:c,proposition:d,provider:u,territory:l}=o,{data:p,messoToken:v,ssoToken:m,umvToken:y,activeTerritory:f}=e,g=(0,n.wUd)({device:s,messoToken:v,platform:c,proposition:d,provider:u,ssoToken:m,territory:l,tokenType:i,umvToken:y,activeTerritory:f}),{hostname:T,deliveryAddresses:E}=o.endpoints.commerceEdge,h=`${T}${E}`;return(0,n.WY0)({url:h,method:"put",data:p,headers:g,handleError:a,service:t,withRequestId:!0,withCredentials:!0})}var X=r(69698);function W({error:e,response:t={},request:r}){const{orderId:n}=t;if(e)return!1;const{referrerInformation:o,purchaseType:i}=r;(0,u.Mg)({order_id:n,purchase_type:i,purchase_referrer_channel:null==o?void 0:o.purchaseReferrerChannel,purchase_referrer_type:null==o?void 0:o.purchaseType,purchase_referrer_name:null==o?void 0:o.purchaseReferrerName})}const G=({paRequest:e,md:t,issuerUrl:r,termUrl:o}={})=>{var i;const a=(null===(i=(0,n.iEs)().threeDSecure)||void 0===i?void 0:i.iframeUrl)??"",s=new URL(a);return s.searchParams.append("issuerUrl",r),t&&e&&o&&(s.searchParams.append("md",t),s.searchParams.append("paRequest",e),s.searchParams.append("termUrl",o)),s.toString()};function J(e){const{status:t,data:r}=e,n=null==r?void 0:r["3DSecureAuthorisationDetails"];return n?[{key:i.Sg.THREE_D_SECURE_REQUIRED,status:t,data:{url:G(n),...n}}]:[null,r]}const Q=[(e,t)=>e.find((({code:e})=>i.rq[t.status]&&i.rq[t.status][e]))?{key:i.Sg.UNAUTHORIZED}:null,e=>e.find((({code:e})=>e===i.ZU))?{key:i.Sg.DUPLICATE_ORDER}:null,e=>{var t;const r=e.find((({code:e})=>e===i.f4));return r?{key:(null==r||null===(t=r.error)||void 0===t?void 0:t.errorCode)??i.f4}:null},e=>e.find((({code:e})=>e===i.eX))?{key:i.Sg.INVALID_PAYMENT_PIN}:null,e=>e.some((({code:e})=>i.B4.includes(e)))?{key:i.Sg.INELIGIBLE_BASKET}:null,e=>e.find((({code:e})=>e===i.lY))?{key:i.Sg.INSUFFICIENT_CREDIT}:null];function z(e){var t;const r=(null==e||null===(t=e.data)||void 0===t?void 0:t.errors)??[];if(!r.length)return[e];const n=Q.reduce(((t,n)=>t||n(r,e)),null);return[{...e,...n}]}function ee(e){var t,r,o;const i="SUBMIT_ORDER",a=(0,n.FFq)({object:e,schema:{properties:{basketReference:{type:"string"},messoToken:{type:"string"},ssoToken:{type:"string"},tokenType:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},data:{type:"object"}},required:["basketReference","umvToken","data"]}});if(a.length)return(0,n.sML)({service:i,validationErrors:a});const{data:s}=e,c=(0,n.iEs)(),{authScheme:d,device:u,platform:l,proposition:v,provider:m,territory:y}=c,{messoToken:f,ssoToken:g,umvToken:T,activeTerritory:E}=e,h=(0,n.wUd)({device:u,messoToken:f,platform:l,proposition:v,provider:m,ssoToken:g,territory:y,tokenType:d,umvToken:T,activeTerritory:E}),{hostname:k,basket:_}=c.endpoints.commerceEdge,I=`${k+_}/${e.basketReference}/order`;return(0,n.WY0)({data:{...s,browserInfo:(0,X.cf)()},headers:h,handleResponse:J,handleError:z,method:"post",service:i,url:I,timeout:79e3,withCredentials:!0,withRequestId:!0,shouldCaptureMessage:p,handleAnalytics:W,optionalTransactionData:{purchaseType:null==s?void 0:s.purchaseType,includes3DS:Boolean(null==s||null===(t=s.payment)||void 0===t?void 0:t.paymentProtectionResult),referrer:null==s||null===(r=s.referrerInformation)||void 0===r?void 0:r.purchaseReferrerName,customerReference:null==s||null===(o=s.payment)||void 0===o?void 0:o.customerReference}})}function te(e={}){const t="DEVICE_ACTIVATE",r=(0,n.FFq)({object:e,schema:{properties:{orderRequest:{type:"string"},messoToken:{type:"string"},ssoToken:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"},purchaseType:{type:"string"},payment:{type:"object"}},required:["orderRequest","umvToken","purchaseType","payment"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const{authScheme:o,endpoints:i,device:a,platform:s,proposition:c,provider:d,territory:u}=(0,n.iEs)(),{orderRequest:l,messoToken:p,ssoToken:v,umvToken:m,activeTerritory:y,...f}=e,g=(0,n.wUd)({messoToken:p,ssoToken:v,tokenType:o,umvToken:m,device:a,platform:s,proposition:c,provider:d,territory:u,activeTerritory:y});return(0,n.WY0)({url:`${i.commerceEdge.hostname}${i.commerceEdge.deviceActivate.replace("{orderRequest}",l)}`,data:{...f,browserInfo:(0,X.cf)()},method:"post",headers:g,timeout:12e4,service:t,withRequestId:!0,withCredentials:!0})}function re(e={}){const t="DEVICE_SIGN_IN",r=(0,n.FFq)({object:e,schema:{properties:{journeyId:{type:"string"},messoToken:{type:"string"},ssoToken:{type:"string"},umvToken:{type:"string"},activeTerritory:{type:"string"}},required:["journeyId","umvToken"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const{authScheme:o,endpoints:i,device:a,platform:s,proposition:c,provider:d,territory:u}=(0,n.iEs)(),{journeyId:l,messoToken:p,ssoToken:v,umvToken:m,activeTerritory:y}=e,f=(0,n.wUd)({messoToken:p,ssoToken:v,tokenType:o,umvToken:m,activeTerritory:y,device:a,platform:s,proposition:c,provider:d,territory:u});return(0,n.WY0)({url:`${i.commerceEdge.hostname}${i.commerceEdge.deviceSignIn.replace("{journeyId}",l)}`,method:"post",headers:f,timeout:12e4,service:t,withRequestId:!0,withCredentials:!0})}function ne(e={}){const t="GET_BOX_INFO",r=(0,n.FFq)({object:e,schema:{properties:{journeyId:{type:"string"},activeTerritory:{type:"string"}},required:["journeyId"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const{endpoints:o,device:i,platform:a,proposition:s,provider:c,territory:d}=(0,n.iEs)(),{journeyId:u,activeTerritory:l}=e,p=(0,n.wUd)({device:i,platform:a,proposition:s,provider:c,territory:d,activeTerritory:l});return(0,n.WY0)({url:`${o.commerceEdge.hostname}${o.commerceEdge.getBoxInfo.replace("{journeyId}",u)}`,method:"get",headers:p,timeout:12e4,service:t,withRequestId:!0})}function oe(e){var t,r,n;return[null,((null==e||null===(t=e.data)||void 0===t||null===(r=t.relationships)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.data)??[]).map((e=>{var t,r,n,o;return{title:null==e||null===(t=e.attributes)||void 0===t?void 0:t.title,terms:null==e||null===(r=e.attributes)||void 0===r?void 0:r.terms,staticId:null==e||null===(n=e.attributes)||void 0===n?void 0:n.staticId,offerClassification:null==e||null===(o=e.attributes)||void 0===o?void 0:o.offerClassification}})).reduce(((e,{staticId:t,...r})=>({...e,[t]:r})),{})]}function ie(e){const t="GET_OFFERS",r=(0,n.FFq)({object:e,schema:{properties:{offers:{type:"array"},partnerId:{type:"string"}},required:["offers"]}});if(r.length)return(0,n.sML)({service:t,validationErrors:r});const o=(0,n.iEs)(),{device:i,platform:a,proposition:s,provider:c,territory:d}=o,u=(0,n.wUd)({device:i,platform:a,proposition:s,provider:c,territory:d,activeTerritory:(0,n.MM8)()}),{offers:l=[],partnerId:p}=e,v=l.map((e=>e.staticId)),{hostname:m,promotions:y}=o.endpoints.atom,f=[p&&`partner=${p}`,`staticId=${v.join("|")}`].filter(Boolean).join(",");return(0,n.WY0)({url:`${m}${y}?represent=(items[where=(${f})])`,method:"get",headers:u,handleResponse:oe,timeout:1e4,service:t})}function ae(e){var t,r;return[null,{amount:null==e||null===(t=e.data)||void 0===t?void 0:t.amount,currency:null==e||null===(r=e.data)||void 0===r?void 0:r.currency}]}function se(e){let t=e.key;return e.errorCode===i.q4&&404===e.status&&(t=i.q4),[{...e,key:t}]}const ce="application/vnd.credit-manager-balance.v1+json";function de({umvToken:e,activeTerritory:t}={}){const r="GET_CREDIT_BALANCE",o=(0,n.FFq)({object:{umvToken:e,activeTerritory:t},schema:{properties:{umvToken:{type:"string"},activeTerritory:{type:"string"}},required:["umvToken"]}});if(o.length)return(0,n.sML)({service:r,validationErrors:o});const i=(0,n.iEs)(),{device:a,platform:s,proposition:c,provider:d,territory:u,endpoints:l}=i,v=(0,n.wUd)({device:a,platform:s,proposition:c,provider:d,territory:u,umvToken:e,activeTerritory:t,accept:ce,contentType:ce,contentMd5:"d41d8cd98f00b204e9800998ecf8427e"}),{hostname:m,balance:y}=l.creditManager,f=m+y;return(0,n.WY0)({headers:v,method:"get",handleError:se,handleResponse:ae,service:r,url:f,timeout:1e4,withRequestId:!0,withCredentials:!0,shouldCaptureMessage:p})}},67813:(e,t,r)=>{r.d(t,{N4:()=>n.N4,xH:()=>n.xH,J1:()=>n.J1,uF:()=>n.uF,f4:()=>n.f4,ob:()=>n.ob,dv:()=>n.dv,Mg:()=>n.Mg,Kq:()=>n.Kq,O9:()=>n.O9,a:()=>n.a,qe:()=>n.qe});var n=r(73131)},5100:(e,t,r)=>{r.d(t,{XF:()=>n.XF});var n=r(25654)},68463:(e,t,r)=>{r.d(t,{iE:()=>n.iE,v6:()=>n.v6});var n=r(99712)},34278:(e,t,r)=>{r.d(t,{YN:()=>n.YN,kb:()=>n.kb,Uu:()=>n.Uu,S4:()=>n.S4,t:()=>n.t,NR:()=>n.NR,qM:()=>n.qM});var n=r(80047)},28798:(e,t,r)=>{r.d(t,{Tb:()=>n.Tb,uT:()=>n.uT,Kl:()=>n.Kl,kB:()=>n.kB,S1:()=>n.S1,YA:()=>n.YA});var n=r(71078)},59283:(e,t,r)=>{r.d(t,{Z:()=>n,Y:()=>o});const n="analytics-debug-cookie",o={ADD_PRODUCT:"add-product",REMOVE_PRODUCT:"remove-product"}},73131:(e,t,r)=>{r.d(t,{OM:()=>m,Kt:()=>y,_X:()=>f,N4:()=>h,CF:()=>l,Q_:()=>p,Ei:()=>v,TH:()=>ie,xH:()=>ae,J1:()=>U,uF:()=>H,Iy:()=>oe,y_:()=>R,f4:()=>D,ob:()=>F,dv:()=>G,Mg:()=>ne,Kq:()=>X,O9:()=>te,a:()=>Q,Mo:()=>V,qe:()=>S});const n="notification_info",o="notification_error",i="notification_success",a="notification_warning",s="page",c="site",d="user",u="order",l="order_success",p="product_holding",v="remove_product",m="add_product",y="basket",f="basket_summary",g="link_click",T="_defer_events",E="_event_queue",h="experiments";var k=r(40408),_=r(59283);const I=(e,t)=>{(0,k.Dr)().get(_.Z)&&console.log("<-----Analytics Debug -----\x3e",e,t)},b=e=>{var t,r;return null===(t=window)||void 0===t||null===(r=t.digitalData)||void 0===r?void 0:r[e]},A=()=>b(E),R=(e,t)=>{I(`Pushed "${t||"unknown"}" to data layer`,e),window.digitalData&&(window.digitalData={...window.digitalData,...e})},C={properties:{text:{type:"string"},context:{type:"string"},module:{type:"string"},other:{type:"string"},pod:{type:"string"},theme:{type:"string"},action:{type:"string"}},required:["text"]},D=({data:e,event:t})=>{var r;I(`Pushed "${t}" to data layer`,e),null!==(r=window)&&void 0!==r&&r.digitalData&&t&&(window.digitalData[t]=e)},S=(e,t)=>{if("undefined"==typeof window)return!0;if(b(T))A().push({eventName:e,data:t}),I(`Event "${e}" pushed to queue`,{data:t});else{const r=new CustomEvent(e,t);document.dispatchEvent(r),I(`Event "${e}" triggered`,{data:t})}};var w=r(22826),O=r(72464);const N=(e,t)=>Object.keys(e).reduce(((e,r)=>(e[r]=(null==t?void 0:t[r])??null,e)),{}),M=(e,t={},r)=>{const n=(0,w.FF)({object:t,schema:e});return!n.length||(I(`Missing Analytics: ${r}`,{options:t,validationErrors:n}),((e,{values:t={},validationErrors:r=[]})=>{(0,O.u)(`Missing Analytics: ${e}`,{level:"warning",extra:{...t,validationErrors:r}})})(r,{values:t,validationErrors:n}),!1)},U=(e,t={},r)=>!!M(e,t,r)&&N(e.properties,t),P=({schema:e,data:t,context:r})=>{const n=b(r)||{};return!!M(e,t,r)&&N(e.properties,{...n,...t})},F=e=>{const t=U(C,e,g);t&&(D({data:t,event:g}),S(g,t))},L=e=>void 0===e?null:e.trim().replace(/\s/g,"-").replace(/[&,+'|\u2122\u00AE]/g,"").toLowerCase();function q(e){if("HTML"===e.tagName)return"/HTML[1]";if(e===document.body)return"/HTML[1]/BODY[1]";let t=0;const r=e.parentNode.childNodes;for(let n=0;n<r.length;n++){const o=r[n];if(o===e)return`${q(e.parentNode)}/${e.tagName}[${t+1}]`;1===o.nodeType&&o.tagName===e.tagName&&t++}}function $(e,t){return e&&e.getAttribute&&e.hasAttribute?e.hasAttribute(t)?e.getAttribute(t):$(e.parentNode,t):""}const j=e=>e&&(e.getAttribute("data-tracking-label")||$(e,"data-tracking-label")||e.getAttribute("alt")||e.nodeValue||e.value||e.getAttribute("name")||e.textContent||e.innerText),x=e=>e.hasAttribute("data-tracking-context")?e.getAttribute("data-tracking-context"):e.hasAttribute("data-tracking-context-id")?j(document.getElementById(e.getAttribute("data-tracking-context-id"))):$(e,"data-tracking-context"),Z=["input[type=submit]","button","a","[data-tracking]","input[type=submit] *","button *","a *","[data-tracking] *"].join(","),B=(()=>{const e={};function t(t){const r=t.target;e[t.type].forEach((e=>{const n=document.querySelectorAll(e.selector);Array.prototype.indexOf.call(n,r)>=0&&e.handler.call(r,t)}))}return(r,n,o)=>{e[n]||(e[n]=[],document.documentElement.addEventListener(n,t.bind(void 0),!0)),e[n].push({selector:r,handler:o})}})();let K=!1;const H=({deferEvents:e=!1}={})=>{var t,r,n,o;window.digitalData={[c]:(null===(t=window)||void 0===t||null===(r=t.digitalData)||void 0===r?void 0:r.site)??{},[T]:(null===(n=window)||void 0===n||null===(o=n.digitalData)||void 0===o?void 0:o._defer_events)??!1,[E]:[]},R({[T]:window.digitalData._defer_events||e},T),I(`Defer Events set to ${e}`),K||(B(Z,"click",(e=>{"false"!==(e=>{let t=e;for(;t.parentNode;){if(void 0!==t.getAttribute&&null!==t.getAttribute("data-tracking"))return t.getAttribute("data-tracking");t=t.parentNode}})(e.target)&&F((e=>{const t={module:L($(e,"data-tracking-module")),pod:L($(e,"data-tracking-pod")),other:L($(e,"data-tracking-other"))||"click",context:L(x(e)),theme:L($(e,"data-tracking-theme")),text:L(j(e))||"",action:L($(e,"data-tracking-action"))},r={type:"click",timestamp:Date.now(),element:{locator:{logical:function(){const e=[];return t.module&&e.push(t.module),t.pod&&e.push(t.pod),t.text&&e.push(t.text),e}(),universal:q(e)},custom:{linkDetails:t}}};if(e.hasAttribute("data-tracking-search")&&(r.element.custom.searchType=e.getAttribute("data-tracking-search"),r.element.custom.searchTerm=x(e)),$(e,"data-tracking-variable")){const t=$(e,"data-tracking-variable"),n=$(e,"data-tracking-value");r.element.custom[t]=L(n||j(e))}return $(e,"data-tracking-event")&&(r.element.custom.eventAction=$(e,"data-tracking-event")),r})(e.target).element.custom.linkDetails)})),K=!0,I("Clicks Initialized"))},V=()=>{R({[T]:!1},T);const e=A();e.length&&e.forEach((({eventName:e,data:t})=>{S(e,t)})),R({[E]:[]},E)},Y={properties:{url:{type:"string"},name:{type:"string"},area:{type:"string"},type:{type:"string"},application:{type:"string"},subPages:{type:"array"},breadcrumb:{type:"array"}},required:["url"]},X=e=>{const t={url:window.location.href,...e},r=U(Y,t,s);r&&(D({data:r,event:s}),S(s,r))},W={properties:{text:{type:"string"},cause:{type:"string"},category:{type:"string"}},required:["text"]},G=({mode:e,text:t,cause:r,category:s},c)=>{const d=U(W,{text:t,cause:r,category:s},c||e);if(d)switch(e){case"info":{const e={[n]:d};R(e,n),S(n,e);break}case"success":{const e={[i]:d};R(e,i),S(i,e);break}case"error":{const e={[o]:d};R(e,o),S(o,e);break}case"warning":{const e={[a]:d};R(e,a),S(a,e);break}}},J={properties:{isLoggedIn:{type:"boolean"},is_logged_in:{type:"boolean"},marketing_consent:{type:"boolean"},payment_provider:{type:"string"},payment_method:{type:"string"},customer_type:{type:"string"},tracking_id:{type:"string"},delivery_address:{type:"boolean"},billing_address:{type:"boolean"},elevated_security:{type:"boolean"},creation_date:{type:"string"},mparticle_id:{type:"string"}},required:[]},Q=e=>{const t=P({schema:J,data:e,context:d});t&&(D({data:t,event:d}),S(d,t))};var z=r(78906);const ee={properties:{proposition:{type:"string"},provider:{type:"string"},territory:{type:"string"},language:{type:"string"},browse_method:{type:"string"}},required:["proposition","provider","territory"]},te=e=>{const{proposition:t,provider:r,territory:n,language:o}=(0,z.iE)(),i={proposition:t,provider:r,territory:n,language:o,browse_method:"web",...e},a=P({schema:ee,data:i,event:c});a&&(D({data:a,event:c}),S(c,a))},re={properties:{order_id:{type:"string"},purchase_type:{type:"string"},payment_provider:{type:"string"},purchase_referrer_channel:{type:"string"},purchase_referrer_type:{type:"string"},purchase_referrer_name:{type:"string"},partner_name:{type:"string"},decision:{type:"string"}},required:[]},ne=e=>{const t=P({schema:re,data:e,context:u});t&&(D({data:t,event:u}),S(u,t),S(l,t))},oe={properties:{product_id:{type:"string"},category:{type:"string"},name:{type:"string"},price:{type:"string"},original_price:{type:"string"},recurring_price:{type:"string"},offer_id:{type:"string"},offer_name:{type:"string"},source:{type:"string"},duration:{type:"string"},state:{type:"string"},type:{type:"string"},cancellation_effective_date:{type:"string"}},required:["product_id"]},ie={properties:{total:{type:"string"},currency:{type:"string"},products:{type:"array"}},required:[]},ae={properties:{campaign_id:{type:"string"},campaign_name:{type:"string"},experiment_id:{type:"string"},experiment_name:{type:"string"},variation_id:{type:"string"},variation_name:{type:"string"}},required:[]}},25654:(e,t,r)=>{r.d(t,{tu:()=>n.tu,XF:()=>i});var n=r(21558),o=r(99712);function i({serviceName:e,serviceVersion:t,environment:r}={}){const{apm:i={},proposition:a,provider:s,territory:c}=(0,o.iE)(),d={serviceName:e,serviceVersion:t,environment:r,centralConfig:!0,transactionSampleRate:.5,stackTraceLimit:0,captureExceptions:!1,captureSpanStackTraces:!1,...i};d.serverUrl&&d.serviceName&&(n.tu.isActive()?n.tu.config(d):n.tu.init(d),n.tu.addLabels({proposition:a,provider:s,territory:c}))}r(67294),r(60929),r(45697)},78906:(e,t,r)=>{r.d(t,{iE:()=>a,v6:()=>s});var n=r(16012),o=r.n(n);let i={};function a(e){return e?function({moduleName:e,key:t,fallback:r=(()=>({}))}){const{authScheme:n,device:o,platform:a,proposition:s,provider:c,territory:d}=i,u={authScheme:n,device:o,platform:a,proposition:s,provider:c,territory:d};return i[e]&&i[e][t]?{...i[e][t],...u}:{...u,...r(i),...i}}(e):i}function s(e={}){i=o()(e)}},99712:(e,t,r)=>{r.d(t,{v6:()=>n.v6,iE:()=>n.iE});var n=r(78906)},87633:(e,t,r)=>{r.d(t,{y0$:()=>u.y0,mEo:()=>u.mE,tVU:()=>u.tV,Sgr:()=>c.Sg,f7M:()=>u.f7,bcd:()=>u.bc,iFf:()=>u.iF,pfw:()=>u.pf,fjV:()=>u.fj,tSZ:()=>u.tS,FC9:()=>u.FC,U8d:()=>u.U8,cHr:()=>u.cH,aFm:()=>u.aF,Ufp:()=>u.Uf,OM5:()=>n.OM,KtT:()=>n.Kt,_XE:()=>n._X,CFG:()=>n.CF,Q_t:()=>n.Q_,Ei$:()=>n.Ei,JEZ:()=>u.JE,tuZ:()=>o.tu,THG:()=>n.TH,Tbq:()=>d.Tb,uTA:()=>d.uT,aM1:()=>u.aM,Drz:()=>u.Dr,PHw:()=>s.PH,Lqw:()=>s.Lq,gi9:()=>s.gi,iis:()=>s.ii,G6J:()=>s.G6,MM8:()=>u.MM,sCF:()=>u.sC,iEs:()=>i.iE,jOu:()=>u.jO,RmV:()=>c.Rm,wUd:()=>c.wU,h2q:()=>u.h2,J1K:()=>n.J1,$fO:()=>d.$f,KjM:()=>u.Kj,t3n:()=>u.t3,buJ:()=>c.t3,sML:()=>c.sM,kbK:()=>a.kb,$KD:()=>l.$K,IyD:()=>n.Iy,y_H:()=>n.y_,WY0:()=>c.WY,f4L:()=>n.f4,vcE:()=>u.vc,FlG:()=>u.Fl,Ydn:()=>u.Yd,M6H:()=>u.M6,U_$:()=>u.U_,b45:()=>u.b4,siq:()=>u.si,sb0:()=>u.sb,t:()=>a.t,mA0:()=>l.mA,qey:()=>n.qe,NR4:()=>a.NR,qMU:()=>a.qM,FFq:()=>l.FF});var n=r(73131),o=r(25654),i=r(99712),a=r(80047),s=r(86330),c=r(27441),d=r(71078),u=r(67375),l=r(22826)},80047:(e,t,r)=>{r.d(t,{YN:()=>I,kb:()=>g,Uu:()=>y,S4:()=>E,t:()=>T,NR:()=>f,qM:()=>A});var n=r(54078),o=r.n(n),i=r(71078);let a,s=!0,c={},d={},u=[],l=null;const p=e=>l?`${l}.${e}`:e,v=e=>(t,r)=>{const n=d[t]||r.fallback;return(0,i.nz)(t,n),n?o().transformPhrase(n,r,e):""};function m(e,t,r={},n={}){const{namespace:s}=r,d={...n,...e};((e={})=>e.length!==c.length||Object.keys({...c,...e}).some((t=>e[t]!==c[t])))(d)&&((0,i.n_)({category:"labelling",message:`Updated with ${Object.keys(d).length} labels (was ${Object.keys(c).length})`}),l=s||l,c=d,a=new(o())({phrases:c,locale:t,onMissingKey:v(t)}),u.forEach((e=>{e()})))}function y(e,t,r={}){m(e,t,r)}function f(e,t,r={}){m(e,t,r,c)}function g(e){return a&&a.has(p(e))||Object.keys(d).includes(p(e))}function T(e,t){return s?(t&&"number"!=typeof t&&t._&&(t.fallback=t._,delete t._),a&&a.t(p(e),t)):t?`${p(e)} - ${JSON.stringify(t)}`:p(e)}function E(e){s=e}var h=r(27441),k=r(99712),_=r(67375);async function I({language:e,section:t}={}){const{territory:r=""}=(0,k.iE)(),n=e||r.toLowerCase(),[o,i]=await function({language:e,section:t}={}){const{device:r,platform:n,proposition:o,provider:i,territory:a,endpoints:s}=(0,k.iE)(),c=(0,h.wU)({device:r,platform:n,proposition:o,provider:i,territory:a,language:e,activeTerritory:(0,_.MM)()}),{hostname:d,labels:u}=s.atom,l=`${d}${u}`;return(0,h.WY)({headers:c,service:"FETCH_LABELS",url:l,timeout:5e3,...t&&{params:{section:t}}})}({language:e,section:t});if(o)return[o,null];const a={};return t&&(a.namespace=t),f(i,n,a),[null,i]}var b=r(67294);function A(){const[,e]=(0,b.useReducer)((e=>e+1),0);return(0,b.useEffect)((()=>{const t=(r=e,!u.find((e=>e===r))&&(u=[...u,r]),function(){u=u.filter((e=>e!==r))});var r;return()=>t()}),[]),{t:T,hasLabel:g}}},68413:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(24970);function o(e){const t=e.type&&{code:e.type};return e.payload||t}function i(e){return function*(...t){const r=yield(0,n.RE)(e,...t),i=yield(0,n.xN)(r);return i.type.endsWith("SUCCESS")?[null,i.payload]:[o(i)]}}},86330:(e,t,r)=>{r.d(t,{PH:()=>d,Lq:()=>u,gi:()=>p,ii:()=>v.i,G6:()=>l});var n=r(14890),o=r(8396),i=r(37488),a=r(66865),s=r(85631),c=r(58146);function d(e){return t=>(0,c.Z)(t)?{type:e}:{type:e,payload:t}}function u(e,t){return(r=e,n={})=>void 0===t[n.type]?r:t[n.type](r,n)}function l(e){const{prefix:t,service:r,name:o}=e,s=(0,i.Z)((0,a.Z)(o)),c=`${s}_REQUEST`,l=`${s}_SUCCESS`,p=`${s}_FAILURE`,v=`${t}/${c}`,m=`${t}/${l}`,y=`${t}/${p}`,f={[c]:v,[l]:m,[p]:y},g={[`${o}Request`]:d(f[c]),[`${o}Success`]:d(f[l]),[`${o}Failure`]:d(f[p])};g[o]=e=>async t=>{t(g[`${o}Request`]());const[n,i]=await r(e);return t(n?g[`${o}Failure`](n):g[`${o}Success`](i))};const T={isFetching:!1,data:null,error:null},E=u(T.isFetching,{[v]:()=>!0,[m]:()=>!1,[y]:()=>!1}),h=u(T.data,{[v]:e=>e,[m]:(e,t)=>t.payload,[y]:e=>e}),k=u(T.error,{[v]:()=>null,[m]:()=>null,[y]:(e,t)=>t.payload}),_=(0,n.combineReducers)({isFetching:E,data:h,error:k});return{actionTypes:f,actionCreators:g,reducer:_,initialState:T}}function p(e){const{prefix:t,services:r}=e;return e.service?l(e):Object.entries(r).map((([e,r])=>l({prefix:t,name:e,service:r}))).reduce(((e={},{reducer:t,...r})=>(0,s.Z)(e,r,{reducer:e.reducer?(0,o.Z)(e.reducer,t):t})))}var v=r(68413)},27441:(e,t,r)=>{r.d(t,{Sg:()=>T,Rm:()=>k,wU:()=>p,t3:()=>w,sM:()=>S,WY:()=>O});var n=r(9669),o=r.n(n),i=r(44586),a=r(21558);function s(e,t,r){return new Promise(((n,o)=>{e().then(n).catch((i=>{setTimeout((()=>{if(0===t)return o(i);s(e,t-1,r).then(n,o)}),r)}))}))}const c=(e,t=5,r=1e3)=>()=>s(e,t,r);var d=r(99712),u=r(22826);const l={accept:"Accept",contentMd5:"Content-MD5",contentType:"Content-Type",device:"X-SkyOTT-Device",messoToken:"X-SkyID-Token",platform:"X-SkyOTT-Platform",proposition:"X-SkyOTT-Proposition",provider:"X-SkyOTT-Provider",language:"X-SkyOTT-Language",ssoToken:"X-SkyID-Token",territory:"X-SkyOTT-Territory",tokenType:"X-SkyOTT-TokenType",umvToken:"X-SkyOTT-UserToken",mfaToken:"X-SkyId-OTT-MfaToken",signature:"X-Sky-Signature",csrfToken:"X-CSRF-Token",authorization:"Authorization",partnerId:"X-SkyOTT-PartnerId",requestId:"X-SkyInt-RequestId",existingPin:"X-SkyOTT-existingPin",application:"X-SkyOTT-Application",activeTerritory:"X-SkyOTT-ActiveTerritory",country:"X-SkyOTT-Country"};function p(e={}){const{tokenType:t}=e;return Object.entries(e).filter((e=>([t,r])=>{const n=(0,u.$K)(l[t]),o=(0,u.$K)(r);if((0,u.$K)(e)){if("SSO"===e&&"messoToken"===t)return!1;if("MESSO"===e&&"ssoToken"===t)return!1}return n&&o})(t)).reduce(((e,[t,r])=>({[l[t]]:r,...e})),{})}var v=r(16423),m=r(27771),y=r(58146),f=r(37514),g=r(71078);const T={CLIENT:"CLIENT",DNS:"DNS",HANDLER:"HANDLER",OFFLINE:"OFFLINE",OPTIONS:"OPTIONS",OTHER:"OTHER",PRECONDITION_FAILED:"PRECONDITION_FAILED",SERVER:"SERVER",TIMEOUT:"TIMEOUT",UNAUTHORIZED:"UNAUTHORIZED",UNAVAILABLE:"UNAVAILABLE",UNPROCESSABLE:"UNPROCESSABLE",VALIDATION:"VALIDATION",NOT_FOUND:"NOT_FOUND",FORBIDDEN:"FORBIDDEN",UNHANDLED:"UNHANDLED",CONFLICT:"CONFLICT",UNKNOWN_REQUEST_ID:"Unknown"},E={2003:"IDENTITY_MALFORMED_AUTHORIZATION",COM_00002:"INVALID_OTT_USER_TOKEN",COM_00003:"EXPIRED_OTT_USER_TOKEN",OVP_00006:"INVALID_OTT_USER_TOKEN",OVP_00007:"EXPIRED_OTT_USER_TOKEN",HATHOR_2001:"EXPIRED_UMV_USER_TOKEN","authentication.missing.or.rejected":"INVALID_OTT_USER_TOKEN"};function h(e){return 0===(0,u.FF)({object:e,schema:{properties:{key:{type:"string"},status:{type:"number"},data:{type:"object"}},required:["key","status","data"]}}).length}const k=e=>{let t;return 503===e?t=T.UNAVAILABLE:e>=500?t=T.SERVER:401===e?t=T.UNAUTHORIZED:403===e?t=T.FORBIDDEN:404===e?t=T.NOT_FOUND:409===e?t=T.CONFLICT:412===e?t=T.PRECONDITION_FAILED:422===e?t=T.UNPROCESSABLE:e>=400&&(t=T.CLIENT),t},_=e=>{var t,r,n,o,i,a,s,c,d,u,l,p;const v=null==e||null===(t=e.response)||void 0===t?void 0:t.data;return(null==v?void 0:v.errorCode)||(null==v||null===(r=v.error)||void 0===r?void 0:r.code)||(null==v||null===(n=v.errors)||void 0===n||null===(o=n[0])||void 0===o?void 0:o.code)||(null==v||null===(i=v.properties)||void 0===i||null===(a=i.errors)||void 0===a||null===(s=a.categoryErrors)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.code)||(null==v||null===(d=v.properties)||void 0===d||null===(u=d.errors)||void 0===u||null===(l=u.fieldErrors)||void 0===l||null===(p=l[0])||void 0===p?void 0:p.code)||-1},I=()=>!0;function b({sanitisedError:e,originalError:t,shouldCaptureMessage:r}){const{service:n,key:o,status:i,errorCode:a,requestId:s}=e;if(r({service:n,key:o,status:i,errorCode:a,error:t})){const e=(({service:e,key:t,status:r,errorCode:n})=>{const o=(-1!==n?n:"")||(0!==r?r:"")||"";return`${e}-${t}${o&&`-${o}`}`})({service:n,key:o,status:i,errorCode:a});(0,g.uT)(e,{tags:{type:"api",service:n},extra:{errorCode:a,"X-SkyInt-RequestId":s,status:i},fingerprint:[n,o,i,a]})}}function A(e,{shouldCaptureMessage:t=I,handleError:r,service:n}={}){const o=(({error:e,service:t})=>{let r=T.OTHER,n=0,o={};const i=_(e),a=(0,v.Z)(e,"response.headers.x-skyint-requestid",T.UNKNOWN_REQUEST_ID);if("ECONNABORTED"===e.code)r=T.TIMEOUT;else if("ENOTFOUND"===e.code)r=T.DNS;else if((e=>Boolean(e.isAxiosError)&&!e.response)(e))r=T.OFFLINE;else{n=(0,v.Z)(e,"response.status",n),o=(0,v.Z)(e,"response.data",o),(0,f.Z)(o)||(o={error:o});const t=k(n);t&&(r=t)}const s={key:r,status:n,errorCode:i,data:o,requestId:a};return(0,u.$K)(t)&&(s.service=t),s})({error:e,service:n});try{if((0,u.$K)(r))return(({handleError:e,sanitisedError:t,shouldCaptureMessage:r,originalError:n})=>{const o=e(t);if(!(0,m.Z)(o))throw new Error("invalid result from handleError, expected error-first array");const[i]=o;if(!(0,y.Z)(i)&&!h(i))throw new Error("invalid result from handleError, error should be null or a valid error object");return h(i)&&b({sanitisedError:i,originalError:n,shouldCaptureMessage:r}),o})({handleError:r,sanitisedError:o,originalError:e,shouldCaptureMessage:t})}catch(e){o.key=T.HANDLER,o.status=0,o.data={message:e.message}}return b({sanitisedError:o,originalError:e,shouldCaptureMessage:t}),[o]}var R=r(67375),C=r(99560),D=r.n(C);function S({service:e,validationErrors:t,shouldCaptureMessage:r=!0}){if(t.length>0){const n={validationErrors:t},o={key:T.OPTIONS,status:0,data:n};return(0,u.$K)(e)&&(o.service=e),r&&(0,g.uT)(`${e}_${T.VALIDATION}_ERROR`.toUpperCase(),{tags:{service:e},extra:{data:n}}),Promise.resolve([o])}}async function w(e={}){const t="GET_UMV_TOKEN",r=(0,u.FF)({object:e,schema:{properties:{messoToken:{type:"string"},personaId:{type:"string"},activeTerritory:{type:"string"}}}});if(r.length)return S({service:t,validationErrors:r});const{endpoints:n,device:o,platform:i,proposition:a,provider:s,territory:c,authScheme:l,authIssuer:v}=(0,d.iE)(),{messoToken:m,personaId:y,activeTerritory:f}=e,g=JSON.stringify({auth:{authScheme:l,authToken:m,authIssuer:v,personaId:y,provider:s,providerTerritory:c,proposition:a},device:{type:o,platform:i}});let T=p({accept:"application/vnd.tokens.v1+json",contentType:"application/vnd.tokens.v1+json",device:o,platform:i,proposition:a,provider:s,territory:c,activeTerritory:f});return n.auth.signature||(T={...T,...p({contentMd5:D()(g).toString()})}),O({url:`${n.auth.hostname}${n.auth.getToken}`,method:"post",data:g,headers:T,timeout:1e4,service:t,withCredentials:!0,signature:n.auth.signature})}async function O(e={}){const{service:t,shouldCaptureMessage:n,handleError:s,handleResponse:l,setSentryContext:f,timeout:g=15e3,optionalTransactionData:k={},signature:I,handleAnalytics:b,retries:C,withRequestId:D,unauthorizedErrorCodes:S=[],...O}=e,N=(e,t)=>{a.tu.isActive()&&null!==e&&(e.transaction.addLabels(t),e.transactionSpan.end(),e.transaction.end())},M=o().create();M.interceptors.request.use(...function(e=!1){return[async t=>{const[n,{getRequestOptions:o}]=await c((()=>r.e(1138).then(r.t.bind(r,51138,23))))().then((e=>[null,e])).catch((e=>[{response:{data:e}},{}]));if(n)return Promise.reject(n);const{clientClockDrift:i=0}=(0,d.iE)();return o(t,{client:e.client,version:e.version,now:()=>Date.now()+i})},null,{runWhen:()=>Boolean(e)}]}(I)),M.interceptors.request.use(...function(e=!1){return[e=>({...e,headers:{...e.headers,...p({requestId:(0,i.Z)()})}}),null,{runWhen:()=>Boolean(e)}]}(D)),M.interceptors.response.use(null,function(e={},t=0,r=0){return async function(n){const{instance:i=o(),unauthorizedErrorCodes:a}=e;let{retries:s=3}=e;s=Math.min(3,Math.ceil(s));const c=n.config;if("ENOTFOUND"===(null==n?void 0:n.code))return Promise.reject(n);if(function({error:e,umvAttempts:t,unauthorizedErrorCodes:r=[]}){const n=_(e);return 0===t&&[...Object.keys(E),...r].includes(n)}({error:n,umvAttempts:r,unauthorizedErrorCodes:a}))return r+=1,w({messoToken:(0,R.h2)()}).then((e=>function(e,{config:t,error:r,instance:n}){const o=(0,v.Z)(e,"1.userToken");if(o){(0,R.sb)(o);const e={...t.headers,"X-SkyOTT-UserToken":o};return n.request({...t,headers:{...e}})}return Promise.reject(r)}(e,{config:c,error:n,instance:i}))).catch((e=>Promise.reject(e)));if((e=>{var t;const r=null==e||null===(t=e.response)||void 0===t?void 0:t.status,n=(e=>{var t;const r=((null==e||null===(t=e.config)||void 0===t?void 0:t.method)??"").toUpperCase();return["GET","OPTIONS"].includes(r)})(e);return r>=400&&r<500||!n})(n))return Promise.reject(n);if(t===s)return Promise.reject(n);t+=1;const d=1e3*Math.pow(2,t);return new Promise((e=>setTimeout(e,d))).then((()=>i(c)))}}({instance:M,retries:C,unauthorizedErrorCodes:S}));const U=(()=>{if(a.tu.isActive()){const e=a.tu.startTransaction(t,"api"),r=e.startSpan("span start","span");return{transaction:e,transactionSpan:r}}return null})();let P={requestUrl:O.url,...k};return M({timeout:g,...O}).then((r=>{var n;P={...P,requestId:(null==r||null===(n=r.headers)||void 0===n?void 0:n["x-skyint-requestid"])??"Unknown",httpStatus:null==r?void 0:r.status};const o=function(e,{service:t,handleResponse:r}={}){let n=e.data,o=null;try{if((0,u.$K)(r)){const t=r(e);if(!(0,m.Z)(t))throw new Error("invalid result from handleResponse, expected error-first array");if([o,n]=t,!(0,y.Z)(o)&&!h(o))throw new Error("invalid result from handleResponse, error should be null or a valid error object")}}catch(e){o={key:T.HANDLER,status:0,data:{message:e.message}},n=void 0}const i=[];(0,y.Z)(o)?i.push(null):((0,u.$K)(t)&&(o.service=t),i.push(o)),(0,u.$K)(n)&&i.push(n);const a=(0,v.Z)(e,"headers.x-skyott-usertoken");return a&&(0,R.sb)(a),i}(r,{service:t,handleResponse:l});return b&&b({error:null==o?void 0:o[0],response:null==o?void 0:o[1],request:null==e?void 0:e.data}),f&&f(t,null==o?void 0:o[1]),o})).catch((r=>{const o=A(r,{service:t,handleError:s,shouldCaptureMessage:n}),i=null==o?void 0:o[0];return i&&(P={...P,errorKey:null==i?void 0:i.key,errorCode:null==i?void 0:i.errorCode,httpStatus:null==i?void 0:i.status,requestId:null==i?void 0:i.requestId}),b&&b({error:i,request:null==e?void 0:e.data}),o})).then((e=>(N(U,P),e)),(e=>{throw N(U,{...P,errorKey:T.UNHANDLED}),e}))}},28615:(e,t,r)=>{r.d(t,{$:()=>o});var n=r(78931);const o=()=>(0,n.j)()?window.Sentry:r.g.Sentry},78931:(e,t,r)=>{r.d(t,{j:()=>n});const n=()=>"undefined"!=typeof window},71078:(e,t,r)=>{r.d(t,{n_:()=>d,Tb:()=>o,uT:()=>c.u,$f:()=>n.$,Kl:()=>y,nz:()=>g,kB:()=>s,S1:()=>l,YA:()=>f});var n=r(28615);const o=(e,{extra:t,fingerprint:r,tags:o}={})=>{const i=(0,n.$)();i?i.withScope((n=>{t&&n.setExtras(t),o&&n.setTags(o),r&&n.setFingerprint(r),i.captureException(e)})):console.error(e,{extra:t,tags:o,fingerprint:r})},i=()=>!0,a=e=>({category:"redux",message:(null==e?void 0:e.type)??""}),s=(({actionFilter:e=i,breadcrumbTransformer:t=a}={})=>()=>r=>i=>{try{const o=(0,n.$)();return o?(e(i)&&o.addBreadcrumb(t(i)),r(i)):r(i)}catch(e){throw o(e,{extra:{action:{type:(null==i?void 0:i.type)??""}}}),e}})();var c=r(72464);const d=({category:e,message:t})=>{const r=(0,n.$)();r&&r.addBreadcrumb({category:e,message:t})};var u=r(67375);const l=()=>{const e=(0,n.$)();if(!e)return;const t=(0,u.UH)(),r=(0,u.SW)()||(0,u.pD)()||t&&`uuid-${t}`;r&&e.configureScope((e=>{e.setUser({id:r})}))},p=["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","Failed to load worker script at blob:https://www.nowtv.com","Failed to load worker script at blob:https://www.peacocktv.com","blob:https://www.peacocktv.com/","ResizeObserver loop limit exceeded","Permission denied to access property","plugin.ucads.ucweb.com","bat.bing.com/actionp",/^chrome-extension:\/\//i],v=[/graph\.facebook\.com/i,/connect\.facebook\.net/i,/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i,/t\.contentsquare\.net/i,/analytics\.global\.sky\.com/i,/static\.ads-twitter\.com/i,/assets\.adobedtm\.com\/extensions/i,/analytics\.tiktok\.com/i];var m=r(78931);const y=async(e,{sentryDsn:t,env:n,proposition:o,provider:i,territory:a,release:s,extraTags:c={},ignoreErrors:d=[],ignoreUrls:u=[],allowUrls:y})=>{const f=(e=>(0,m.j)()?(window.Sentry=e,window.Sentry):(r.g.Sentry=e,r.g.Sentry))(e);f&&(f.init({dsn:t,environment:n,release:s,ignoreErrors:[...p,...d],denyUrls:[...v,...u],attachStacktrace:!0,beforeSend:e=>{if((0,m.j)()&&/^.*(RuxitSynthetic|DynaBot).*$/.test(window.navigator.userAgent))return null;if(!e.fingerprint&&e.exception){const t=(e.exception.values||[]).map((({value:e}={})=>e)).filter((e=>e&&e.length>1));if(t.length)return{...e,fingerprint:t}}return e},...y&&{allowUrls:y},autoSessionTracking:!1}),f.setTags({...c,commit_hash:s,proposition:o,provider:i,territory:a}),l())},f=(e,t)=>{const r=(0,n.$)();if(!r)return null;r.setTag(e,t)},g=(e="",t="")=>{const r=t?` with fallback key ${t}`:"";(0,c.u)(`Missing Label: ${e}${r}`,{level:t?"warning":"error"})}},72464:(e,t,r)=>{r.d(t,{u:()=>o});var n=r(28615);const o=(e,{extra:t,tags:r,fingerprint:o,level:i="warning"}={})=>{const a=(0,n.$)();if(!a)return void console.log(e,{extra:t,tags:r,fingerprint:o,level:i});const s=[e];a.withScope((n=>{t&&n.setExtras(t),r&&n.setTags(r),n.setFingerprint(o||s),n.setLevel(i),a.captureMessage(e)}))}},4769:(e,t,r)=>{r.d(t,{t6:()=>y,sC:()=>f,aM:()=>g,vc:()=>T,jO:()=>E,Wd:()=>h,Yd:()=>k,rj:()=>_,Ay:()=>I,U_:()=>b,p4:()=>A,Pb:()=>R,M6:()=>C});var n=r(62195),o=r.n(n),i=r(39627),a=r.n(i),s=r(45580),c=r.n(s),d=r(3812),u=r.n(d),l=r(99712),p=r(98520);const v=[a(),c()],m=[u()],y=()=>{const{proposition:e,territory:t}=(0,l.iE)();return o().createStore(v,m,`${e}-${t}`.toUpperCase())},f=()=>y().get(p.y0),g=()=>y().remove(p.y0),T=e=>y().set(p.y0,e),E=()=>y().get(p.mE),h=()=>y().remove(p.mE),k=e=>y().set(p.mE,e),_=()=>y().get(p.tV),I=()=>y().remove(p.tV),b=e=>y().set(p.tV,e),A=()=>y().get(p.XV),R=()=>y().remove(p.XV),C=e=>y().set(p.XV,e)},98520:(e,t,r)=>{r.d(t,{pf:()=>n,KY:()=>o,JE:()=>i,Uf:()=>a,FC:()=>s,tS:()=>c,f7:()=>d,cH:()=>u,U8:()=>l,SO:()=>p,Og:()=>v,Ug:()=>m,hD:()=>y,y0:()=>f,mE:()=>g,tV:()=>T,XV:()=>E,fj:()=>h,aF:()=>k,s5:()=>_,bc:()=>I,iF:()=>b});const n="skyCEsidismesso01",o="idsessionstate",i="skyUMV",a="skySSO",s="skyCEsidsso01",c="skyCEsidmesso01",d="skyCEsidexsso01",u="skyCEsidtrk01",l="skyCEsidextrk01",p="customerSegmentation",v="KNOWN_USER",m="paymentProvider",y="brazeProfileId",f="BASKET_REFERENCE",g="DEVICE_ACTIVATION_JOURNEY_ID",T="DEVICE_ACTIVATION_TYPE",E="DEVICE_ACTIVATION_PLATFORM",h="sales-uuid",k="uuid",_="activeTerritory",I="lastArticleViewedTitle",b="liveChatType"},40408:(e,t,r)=>{r.d(t,{Dr:()=>c,h2:()=>d,b4:()=>u,zX:()=>l,Kj:()=>p,t3:()=>v,CN:()=>m,sb:()=>y,Fl:()=>f,si:()=>g,oQ:()=>T,sc:()=>E,_y:()=>h,SW:()=>k,pD:()=>_,UH:()=>I,MM:()=>b});var n=r(36808),o=r.n(n),i=r(99712),a=r(98520);const s=()=>({path:"/",domain:(0,i.iE)().cookieDomain}),c=()=>({get:e=>o().get(e),set:(e,t,r={})=>o().set(e,t,{...s(),...r}),remove:(e,t={})=>o().remove(e,{...s(),...t})}),d=()=>c().get(a.pf),u=e=>c().set(a.Og,e),l=()=>c().get(a.KY),p=()=>c().get(a.Uf),v=()=>c().get(a.JE),m=()=>c().remove(a.JE),y=e=>c().set(a.JE,e),f=(e,t)=>{c().set(a.SO,e,t)},g=(e,t)=>{c().set(a.Ug,e,t)},T=()=>c().remove(a.hD),E=(e,t)=>{c().set(a.hD,e,t)},h=()=>{c().remove(a.JE),c().remove(a.pf),c().remove(a.Uf),c().remove(a.tS),c().remove(a.f7),c().remove(a.FC),c().remove(a.SO)},k=()=>c().get(a.cH),_=()=>c().get(a.U8),I=()=>c().get(a.aF),b=()=>c().get(a.s5)},67375:(e,t,r)=>{r.d(t,{y0:()=>s.y0,mE:()=>s.mE,tV:()=>s.tV,f7:()=>s.f7,bc:()=>s.bc,iF:()=>s.iF,pf:()=>s.pf,fj:()=>s.fj,tS:()=>s.tS,FC:()=>s.FC,U8:()=>s.U8,cH:()=>s.cH,aF:()=>s.aF,Uf:()=>s.Uf,JE:()=>s.JE,t6:()=>o.t6,_y:()=>n._y,aM:()=>o.aM,Wd:()=>o.Wd,Pb:()=>o.Pb,Ay:()=>o.Ay,CN:()=>n.CN,Dr:()=>n.Dr,MM:()=>n.MM,sC:()=>o.sC,jO:()=>o.jO,p4:()=>o.p4,rj:()=>o.rj,zX:()=>n.zX,h2:()=>n.h2,pD:()=>n.pD,SW:()=>n.SW,UH:()=>n.UH,Kj:()=>n.Kj,t3:()=>n.t3,vc:()=>o.vc,Fl:()=>n.Fl,Yd:()=>o.Yd,M6:()=>o.M6,U_:()=>o.U_,b4:()=>n.b4,si:()=>n.si,sb:()=>n.sb});var n=r(40408),o=r(4769),i=(r(62195),r(58855)),a=r.n(i);r(99712),a();var s=r(98520)},22826:(e,t,r)=>{function n(e){return void 0!==e}r.d(t,{$K:()=>n,mA:()=>l,FF:()=>u});var o=r(27771),i=r(73505),a=r(290),s=r(37514),c=r(36378),d=r(49360);function u({object:e,schema:t}){const r=[];return(0,s.Z)(e)?(n(t.properties)&&Object.entries(t.properties).forEach((([t,d])=>{n(e[t])&&("string"!==d.type||(0,c.Z)(e[t])||r.push(`${t} is not a string`),"array"!==d.type||(0,o.Z)(e[t])||r.push(`${t} is not an array`),"number"!==d.type||(0,a.Z)(e[t])||r.push(`${t} is not a number`),"object"!==d.type||(0,s.Z)(e[t])||r.push(`${t} is not an object`),"boolean"!==d.type||(0,i.Z)(e[t])||r.push(`${t} is not a boolean`))})),n(t.relationships)&&t.relationships.forEach((t=>{if(n(t.oneOf)){let o=0;t.oneOf.forEach((t=>{n(e[t])&&(o+=1)})),1!==o&&r.push(`one of ${t.oneOf.join(", ").replace(/, ([^,]*)$/," or $1")} is required`)}if(n(t.anyOf)){let o=0;t.anyOf.forEach((t=>{n(e[t])&&(o+=1)})),0===o&&r.push(`any of ${t.anyOf.join(", ").replace(/, ([^,]*)$/," or $1")} are required`)}})),n(t.required)&&t.required.forEach((t=>{(0,d.Z)(e[t])&&r.push(`${t} is required`)})),r):(r.push("object is not an object"),r)}r(67294);const l=e=>{var t,r;return(null==e||null===(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))||void 0===t||null===(r=t.map((e=>e.toLowerCase())))||void 0===r?void 0:r.join("-"))??""}},31769:(e,t,r)=>{r.d(t,{t6:()=>n.t6,_y:()=>n._y,aM:()=>n.aM,Wd:()=>n.Wd,Pb:()=>n.Pb,Ay:()=>n.Ay,CN:()=>n.CN,Dr:()=>n.Dr,MM:()=>n.MM,jO:()=>n.jO,p4:()=>n.p4,rj:()=>n.rj,zX:()=>n.zX,h2:()=>n.h2,t3:()=>n.t3});var n=r(67375)}}]);
//# sourceMappingURL=6854.d4dc17a04181e9aa4bd3.min.js.map